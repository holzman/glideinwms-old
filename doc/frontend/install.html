<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta http-equiv="CONTENT-TYPE" content="text/html; charset=UTF-8">
  <title>glideinWMS - Glidein Frontend</title>
  <meta name="CREATED" content="0;0">
  <meta name="CHANGED" content="20100521;20081031;14115200">    
  <link rel="stylesheet" type="text/css" href="../common/glideinWMS.css" media="screen, projection" />
</head>

<body lang="en-US" dir="ltr">
    <h1>
        <a href="index.html">GlideinWMS</a>
	<span>The Glidein-based Workflow Management System</span>
    </h1>
    <ul class="breadcrumbs">
        <li><a href="../index.html">Home</a></li>
        <li><a href="./index.html">Glidein Frontend</a></li>
        <li>Installation</li>
    </ul>
    <div class="clear" />
    <div class="leftmenu">
        <ul class="components">
	<li> <a href="../index.html">Home</a></li>
	<li> <a href="../download.html">Download</a></li>
	<li> <a href="../frontend/index.html">Glidein Frontend</a></li>
    <li> <a href="../corral.html">Corral Frontend</a></li>
	<li> <a href="../factory/index.html">WMS Factory</a></li>
	<li> <a href="../components/index.html" >Components</a></li>
	<li> <a href="../components/faq.html" class="last">FAQ</a></li>
        </ul>
   <div class="search">
        <div id="cse-search-form" style="width: 100%;">Loading</div>
        <script src="http://www.google.com/jsapi" type="text/javascript"></script>
        <script src="../common/glidein.js" type="text/javascript"></script>
        <script type="text/javascript">
            google.load('search', '1', {language : 'en', style : google.loader.themes.MINIMALIST});
            google.setOnLoadCallback(onLoad);
        </script>
    </div>
    </div>
    <div id="searchcontent"><h2>Search Results</h2><div id="cse"></div> </div>
<div class="content">
    <div class="heading">
    <img align="right" width="280px" border="0px"
        src="../images/simple_diagram.png" usemap="#rightimage">
    <map name="rightimage">
        <area shape="rect" coords="90,3,177,60" href="../frontend/index.html" />
        <area shape="rect" coords="5,88,118,146" href="../components/collector_install.html" />
        <area shape="rect" coords="134,88,275,146" href="../factory/index.html" />
        <area shape="rect" coords="189,3,274,60" target="_blank" href="../corral.html" />
    </map>

    <h2>Glidein Frontend</h2>
	<ul class="subcomponents">
	     <li> <a href="./index.html">Overview</a></li>
	     <li> Install</li>
	     <li> <a href="./configuration.html">Configuration</a></li>
	     <li> <a href="./design.html">Design</a></li>
         <li> <a href="./monitoring.html">Monitoring</a></li>
	     <li class="last"> <a href="./troubleshooting.html">Troubleshooting</a></li>
	</ul>
        <h3>Installation</h3>
	</div>
<div class="jump">
<u>Jump to:</u>
<ol>
    <li><a href="#description">Description</a></li>
    <li><a href="#hardware">Hardware requirements</a></li>
    <li><a href="#software">Needed software</a></li>

    <li><a href="#before_install">Before you begin...</a></li>
    <li><a href="#system">Condor installation</a></li>
    <li><a href="#frontend">Frontend installation</a></li>
</ol>
</div>
<div class="related">
<u><b>Installation Procedure</b></u><br/><br/>

<a href="../install.html">Installation Overview</a><br/><br/>
<a href="../install.html#osg">Connecting to OSG Factory</a><br/><br/>

Preceded by: <a href="../components/pool_install.html">User Pool Schedd</a><br/>
Followed by: <a href="../components/index.html">Other Components</a><br/>
Install as: <b>Vo Frontend User</b><br><br>
<a href="../components/configuration_install.html">Configuration based installer</a><br/>
<a href="configuration.html">Frontend Configuration</a>
</div>
<div class="section">

            <h2><a name="description">1. Description</a></h2>
        <p><img src="../images/overview_frontend.png" name="graphics1" align="right" border="0"></p>
            <p>The Glidein Frontend will match user jobs with glidein factory ads. It is responsible for the submission of new glideins.</p>

            <p>
                The VO frontend also keeps part of the configuration of a glidein, and can also provide the 
                <a href="../factory/install.html">glidein Factory</a> with the pilot proxies.
            </p>

    <p> Note: if you are installing only the frontend
    and planning to connect to the OSG factory, please refer to this section:
    <a href="../install.html#osg">Connecting to OSG Factory</a></p>

    </div>




    <div class="section">

            <h2><a name="hardware">2. Hardware requirements</a></h2>
            <table class="requirements" style="width: 500px;">
            <tr class="head">
                <td>CPUs</td>

                <td>Memory</td>
                <td>Disk</td>
            </tr>
            <tr>
                <td>1</td>
                <td>1GB</td>
                <td>~20GB</td>

            </tr>
            </table>
            
            <p>
                This machine needs <b>a fast CPU</b> and a moderate amount of <b>memory</b> (<b>1GB </b>should be enough).<br>

                The <b>disk</b> needed is just for binaries, config files and log files (<b>20GB</b> should be enough)
            </p>
    </div>




    <div class="section">

    <h2><a name="software">3. Needed software</a></h2>
    <table class="requirements">
    <tr class="head">
        <td>Software</td>
        <td>Notes</td>
        <td>Install Before glideinWMS</td>

    </tr>
    <tr>
        <td>Linux OS</td>
        <td>
            A reasonably recent <a target="_blank" href="http://www.cs.wisc.edu/condor/manual/v7.0/1_5Availability.html">Condor-supported OS</a>
            Linux OS (RH/SL4 and RH/SL5 tested at press time).
        </td>
        <td class="checked"> X </td>

    </tr>
    <tr>
        <td><a target="_blank" href="http://www.python.org/">Python</a> interpreter</td>
        <td>v2.3.4 or above</td>
        <td class="checked"> X </td>
    </tr>

    <tr>
        <td>The perl-Time-HiRes rpm.</td>
        <td>This rpm may already be included in perl, depending on the perl version</td>
        <td class="checked"> X </td>
    </tr>
    <tr>
        <td>The <a target="_blank" href="https://twiki.grid.iu.edu/twiki/bin/view/Documentation/WebHome">OSG client software</a>.</td>

        <td>This can be installed prior to glideinWMS, but the installer can install it inline with the glideinWMS install</td>
        <td> &nbsp; </td>
    </tr>
    <tr>
        <td>
            A HTTP server, like <a target="_blank" href="http://www.apache.org/">Apache</a> or
            <a target="_blank" href="http://www.stllinux.org/meeting_notes/2001/0719/tux/intro.html">TUX</a>.
        </td>

        <td>This should be installed prior to glideinWMS (see <a href="#software_httpd">below</a>)</td>
        <td class="checked"> X </td>
    </tr>
    <tr>
        <td>The <a target="_blank" href="http://www.cs.wisc.edu/condor/downloads/">Condor distribution</a> as a tarball.</td>

        <td>The installer will use the tarball to install and configure Condor inline</td>
        <td> &nbsp; </td>
    </tr>
    <tr>
        <td>The <a target="_blank" href="http://oss.oetiker.ch/rrdtool/">RRDTool package</a></td>
        <td>v1.2.18 or later (see <a href="#software_rrdtool">additional install notes</a>)</td>

        <td class="checked"> X </td>
    </tr>
    <tr>
        <td>The <a target="_blank" href="http://freshmeat.net/projects/m2crypto">M2Crypto python library</a></td>
        <td>v0.17 or later (see <a href="#software_m2crypto">additional install notes</a>)</td>

        <td class="checked"> X </td>
    </tr>
    <tr>
        <td>The <a target="_blank" href="http://sourceforge.net/projects/javascriptrrd/">javascriptRRD</a> package</td>
        <td>v0.6.3 or later with flot (see <a href="#software_javascriptRRD">additional install notes</a>)</td>

        <td class="checked"> X </td>
    </tr>
    <tr>
        <td>The <a href="index.html">glideinWMS software</a>.</td>
        <td>&nbsp;</td>
        <td> &nbsp; </td>

    </tr>
    </table>

    <br>
    <h4>NOTE:</h4>
    <ul>
        <li>Condor version v7.3.1 has a known issue with incorrect return/exit codes of condor_status and condor_q</li>
        <li>

            If you are using Condor version v7.3.2 disable VOMS checking in condor_config file used by Condor daemons other 
            than that used by user schedd. VOMS checking adds unrequired overhead. To do so, set <br>
            <blockquote>USE_VOMS_ATTRIBUTES = False </blockquote> 
            or for individual condor daemons like collector<br>
            <blockquote>COLLECTOR.USE_VOMS_ATTRIBUTES = False </blockquote> 
        </li>
    </ul>
    
    <h3><a name="software_httpd">3.2 HTTP Server</a></h3>

    <p>
        The glidein Frontend needs a HTTP server, like <a target="_blank" href="http://www.apache.org/">Apache</a> or 
        <a target="_blank" href="http://www.stllinux.org/meeting_notes/2001/0719/tux/intro.html">TUX</a>.  The server should be installed on 
        the same node, but a different node can be used as long as the web area is writable from this one. Servers often come 
        pre-installed with HTTP server software, so if you have one running, just reuse it.  Otherwise, the installer can help 
        you install one (as root).  (See <a href="../components/prerequisites.html#system_httpd">GlideinWMS Component Install</a>) 
    </p>
    
    <h3><a name="software_rrdtool">3.3 RRDTool</a></h3>
    <p>

        You will also need the python module for <a target="_blank" href="http://oss.oetiker.ch/rrdtool/">RRDTool</a> (v1.2.18 or later). Many 
        systems come with packages for it; if possible use that.  Otherwise see 
        <a href="../components/prerequisites.html#system_rrdtool">additional install notes</a> for alternative installs.
    </p>

    <h3><a name="software_m2crypto">3.4 M2Crypto</a></h3>
    <p>
        You will need the <a target="_blank" href="http://freshmeat.net/projects/m2crypto">M2Crypto python library</a>. A few systems include it in the 
        software distribution; if possible install the system one.  Otherwise see 
        <a href="../components/prerequisites.html#system_m2crypto">additional install notes</a> for alternative installs.
    </p>

    <h3><a name="software_javascriptRRD">3.5 javascriptRRD</a></h3>
    <p>
        You will need the <a target="_blank" href="http://sourceforge.net/projects/javascriptrrd/">javascriptRRD package</a>.  It contains the 
        javascript libraries needed by the monitoring.  Just download the tarball (with flot), and untar it.  You will need to 
        point the installer to this directory.
    </p>
    </div>




    <div class="section">

    <h2><a name="before_install">4. Before you begin...</a></h2>
    <h3><a name="before_install_users">4.1 Required Users</a></h3>
    <p>
        The installer will ask you for several non-privileged users during the install process.  These should be created prior to running the
        glideinWMS installer.  
    </p>
    
    <table class="requirements">
    <tr class="head">

        <td>User</td>
        <td>Notes</td>
    </tr>
    <tr>
        <td>Vo Frontend User</td>
        <td>
            The Glidein Frontend should be installed as a non-priviliged user.<br/>  
            <strong>Note:</strong>If you are not re-using an existing condor client and instead installing a <a href="#system">condor client</a> specific for the frontend, you should install it as this user as well.  
        </td>

    </tr>
    </table>
    <br>
    
   <h3><a name="before_install_certs">4.2 Required Certificates/Proxies</a></h3>
    <p>
Each service in the GlideinWMS will use a x509 certificate in order to identify itself using GSI authentication (see the <a href="../components/gsi.html">Quick Reference Guide"</a> for an overview.
        The installer will ask for several DNs for GSI authentication.  You have the option of using a service certificate or a proxy.  These should be
        created and put in place before running the installer.  The following is a list of DNs the installer will ask for:
        <ul>
            <li>WMS Collector cert/proxy DN</li>

            <li>User Pool Collector cert/proxy DN</li>
            <li>User Submitter cert/proxy DN</li>
            <li>Glidein Frontend Condor cert/proxy DN (cannot use a cert here)</li>
        </ul>
        <strong>Note:</strong> In some places the installer will also ask for nicknames to go with the DNs.  For the most part the name given doesn't 
        really matter.  There is one case where is does matter.  If you are using privilege separation, then, on the WMS Collector, the nickname for 
        each Glidein Frontend must be the username that you created for the frontend.<br> 
        <strong>Note 2:</strong> The installer will ask if these are trusted Condor Daemons.  Answer 'y'. 
    </p>

    
    <h3><a name="before_install_dirs">4.3 Required Directories</a></h3>
    <p>
        When installing the Glidein Frontend you will be presented with a question asking for the directory location for various items.  The example below puts
        many of them in /var.  All the directories in /var have to be created as root.  Therefore, if you intend on using /var, you will have to create 
        the directories ahead of time.
    </p>
        
    <p>
        <strong>Note:</strong> The web data must be stored in a directory served by the HTTP Server. <br><br>
        <strong>Example:</strong>

    </p>
<pre>
Where will the web data be hosted?: [/var/www/html/glidefactory] /var/www/html/glidefactory
</pre>

    <h3><a name="before_install_misc">4.4 Miscellaneous Notes</a></h3>
    <p>
        At some point the installer will prompt you for the OSG VDT Client location or if you want to install it.  The installer will install the client
        for you.  (See <a href="../components/prerequisites.html">GlideinWMS Component Install</a>)
    </p>
    <p>

        When asked if you want OSG_VDT_BASE defined globally? Answer 'y' unless you want to force your users to find and hard code the location.
    </p>
    <p>
     By default, match authentication will be used. 
     If you have a reason not to use it, be sure to set to False the USE_MATCH_AUTH 
     attribute in both in both the Factory and Frontend configuration files. 
    </p>
    </div>




    <div class="section">
    
    <h2><a name="system">5. Condor installation instructions</a></h2>

    <p>
        The Glidein Frontend will need the the Condor binaries. You can reuse an existing installation, if available, like if you host
        the Glidein Frontend on the <a href="../components/pool_install.html">a submitter node</a>.
    </p>

    <p>
        Else you need to install a local copy. The suggested way is to install as the same non privileged  <b>Glidein Frontend</b>
        user (see <a href="#frontend">below</a>).  The whole process is managed by a install script described below.
    </p>

    <p>Move into</p>
    <blockquote>glideinWMS/install</blockquote>

    <p>and execute</p>
    <blockquote>./glideinWMS_install</blockquote>

    <p>You will be presented with this screen:</p>

    <blockquote>
        What do you want to install?<br>
        (May select several options at one, using a , separated list)<br>
        [1] glideinWMS Collector<br>
        [2] Glidein Factory<br>
        [3] GCB<br>

        [4] pool Collector<br>
        [5] Schedd node<br>
        [6] Condor for Glidein Frontend<br>
        [7] Glidein Frontend<br>
        [8] Components
    </blockquote>

    <p>Select <b>6</b>.</p>

    <p>Now follow the instructions.  Additional description is below:</p>
    <table class="requirements">
    <tr class="head">
    <td>Field</td>
    <td>Installation Text</td>
    <td>Description</td>

    </tr>
    <tr>
    <td>Condor</td>
    <td><i>
    </i>Where do you have the Condor tarball?<br/>
    Where do you want to install it?</td>
    <td>

        Though the frontend does not actually start any Condor processes, it needs a condor installation in order to use Condor tools and commands.
        
        For this, you will need a condor distribution and a location to install to.  It will also prompt for a administrator email.
    </td>
    </tr>
    <tr>
    <td>GSI Security</td>
    <td><i>Where can I find the directory with the trusted CAs? </i></td>
    <td>

        GSI security is based on x509 certificates.  
        First, you will need a list of trusted certificates.  VDT comes with a list of certificates, so, if you install that now (or have installed it previously), you can install that now.  Note that you may have to update your certificates if you have an old VDT installation.<br/>
        You will next need a certificate or proxy for the VO frontend.  See <a href="#before_install_certs">the previous section</a> for more information on required certificates and proxies.</a>
    </td>
    </tr>
    <tr>
    <td>Collector</td>

    <td><i>What node is the collector running (i.e. CONDOR_HOST)? </i></td>
    <td>
        The installer will ask, "What node is the collector running (i.e. CONDOR_HOST)?".  The collector referred to by this question is the user pool collector.  Answer with the fqdn of the user pool collector.  You will need to open all
port(s) that the collector will use on the firewall.
    </td>
    </tr>



    </table>
    </div>




    <div class="section">

    <h2><a name="frontend">6. Glidein Frontend installation</a></h2>
    <p>
        The Glidein Frontend needs a x509 proxy to communicate with the glidein Factory. You need to create such proxy before starting a VO 
        Frontend and then keep it valid for the life of the frontend. If used for job submission (i.e. if it is passed to the glidein
        Factory), this proxy must at any point in time have a validity of at least the longest expected job being run by the glideinWMS
        (and not less than 12 hours).<br><br>
        How you keep this proxy valid (via MyProxy, kx509, voms-proxy-init from a local certificate, scp from other nodes, or other methods), 
        is beyond the scope of this document.
    </p>

    <p>
        The VO frontend can also host the x509 proxies used for glidein submission. If you do use this (recommended) method, you need to
        keep these proxies valid at all time, as you do for the main frontend proxy.
    </p>

    <p>
        The Glidein Frontend should be installed as a non privileged user. The provided installer can be used to create the configuration file,
        although some manual tunning will probably be needed.
    </p>

    <p>Before starting the installation of the Glidein Frontend make sure that the WMS Collector is started and running.</p>

    <p>Note that the OSG client is required, but it is not recommended
    to actually source the setup.sh before installation.  This can cause
    problems with conflicting python versions.  VDT sometimes installs 
    its own version of python which will not have rrdtool or M2Crypto.
    You can determine if this will be a problem by sourcing the VDT setup
    script and then doing a 'type python' or 'which python' to see
    which python is being used.
    </p>

    <p>To begin the installation procedure: </p>
    <blockquote>
        cd glideinWMS/install<br/>
        ./glideinWMS_install
    </blockquote>

    <p>
        You will be presented with the service selection screen. Follow the instructions.  Further detail and a walk-through is presented below:

    <table class="requirements">
    <tr class="head">
    <td>Field</td>
    <td>Installation Text</td>

    <td>Description</td>
    </tr>
    <tr>
    <td>javascriptRRD</td>
    <td><i>Do you have already a javascriptRRD installation?<br/>
    Where is javascriptRRD installed?</i></td>
    <td>

        The javascriptRRD library is required to display statistics for the web-based display.
        It must be installed before the installation can continue.
    </td>
    </tr>
    <tr>
    <td>Directories</td>
    <td><i>
        Where will you host your config files?<br/>
        Where will the web data be hosted?<br/>

        What Web URL will you use?<br/>
        Where will you host your log files?
    </i></td>
    <td>
        You will have to give the directories where the frontend will store its files.
        By default, some of these directories are in /var, and, if you want to keep them there,
        you will need to create them first as root.  The web data should be stored in a directory
        served by your web server.
        <br/>
        You may want to consider putting them in a directory other than a user home directory.
    </td>
    </tr>
    <tr>

    <td>VO Configuration</td>
    <td><i>Give a name to this Glidein Frontend<br/>
        Give a name to this Glidein Frontend instance?</i></td>
    <td>
        <strong>IMPORTANT:</strong> When the installer asks, "Give a name to this Glidein Frontend?", you must provide the name that you gave to the installer for the Factory when it asked, "Frontend security name".  Otherwise, the factory will reject requests from the frontend.
    </td>
    </tr>

    <tr>
    <td>WMS Collector</td>
    <td><i>What node is the WMS collector (i.e. the gfactory) running?<br/>
        What is the classad identity of the glidein factory?<br/>
        What is the WMS collector DN (i.e. subject)?<br/>
    </i></td>
    <td>

        At this point, the location (fqdn) as well as the DN for the WMS collector is needed.
        The installer will ask you for the classad identity of the glidein factory.  This should be the be the username the factory was installed as.  It should be in this format:  &lt;username&gt;@&lt;factoryfqdn&gt;.  You will need
to make sure all ports are open on any firewalls for these machines.

            <br/><b>
        For a visual guide to the configuration options that need to
        match in the frontend and factory, see this
        <a href="../factory/troubleshooting.html#colorcoded">color coded chart.</a>
        </b>

    </td>
    </tr>
    <tr>
    <td>GSI Configuration</td>
    <td><i>Where is your proxy located?<br/>

        What is the mapped name?</i></td>
    <td>

    To use the Glidein Frontend you need a valid GSI proxy.
    Glidein Frontend will use this proxy to talk to the WMS Collector and User Schedd
    Make sure this DN is in the WMS collector condor_mapfile.

        The installer will ask, "What is the mapped name?".  If you are using privilege separation, answer with the username of the user you created for the VO frontend on the Factory.  The answer should have the following format:  &lt;username&gt;@&lt;factory fqdn&gt;
    </td>
    </tr>
    <tr>

    <td>Pool Collector</td>
    <td><i>What is the pool collector DN (i.e. subject)?<br/>
        List and secondary pool collector the glideins should use.</i></td>
    <td>
        This will be used to contact the pool collector to query jobs.  You will need to match the DN used 
        in the condor mapfile.
    </td>
    </tr>
    <tr>

    <td>Job monitoring</td>
    <td><i>What kind of jobs do you want to monitor?<br/>
        Give a name to the main group:</i></td>
    <td>
        This is a condor expression for which jobs you'd like reported in the web-based tool.
        The default is:
        <blockquote>
            (JobUniverse==5)&&(GLIDEIN_Is_Monitor =!= TRUE)&&(JOB_Is_Monitor =!= TRUE)
        </blockquote>

        This tranlates to all vanilla universe jobs that are not monitoring processes.  This 
        should be fine unless a more restrictive set is desired.
    </td>
    </tr>
    <tr>
    <td>Job Matching</td>
    <td><i>What expression do you want to use to match glideins to jobs?</i></td>
    <td>
        You will need to specify the selection and matching criteria for the user jobs. The suggested values:
        <blockquote>

            jobs_constraint = (JobUniverse==5)&amp;&amp;(DESIRED_Sites=!=UNDEFINED)<br>
            match_string = glidein["attrs"]["GLIDEIN_Site"] in job["DESIRED_Sites"].split(",")</p>
        </blockquote>
        should be fine for some basic matchmatching, providing that your user jobs add</p>
        <blockquote>
            +DESIRED_Sites = "site1,site2,...siteN"<br>

            requirements = stringListMember(GLIDEIN_Site, DESIRED_Sites)
        </blockquote>
    </td>
    </tr>
    <tr>
    <td>Proxy Configuration</td>
    <td><i>VO frontend proxy = 'XXXX'<br/>
        Do you want to use is to submit glideins?<br/>

        Please add all the proxies that this glidein will use</i></td>
    <td>
        A proxy is required to submit jobs to the glideins.  
        Find more on this in the <a href="#before_install_certs">previous section</a>.
    </td>
    </tr>
    <tr>
    <td>Other DNs</td>

    <td><i>Please add all the DNs that this glidein will connect to</i></td>
    <td>
        These DNs will be put in the condor mapfile so that they are authorized to talk to the frontend.
        This is for security purposes.
    </td>
    </tr>
    <tr>
    <td>Final Config</td>
    <td><i> 
        Do you want to expose the Grid env. to the user jobs?<br/>
        Do you want to create the Glidein Frontend instance?</i></td>
    <td> 
        Exposing the grid environment to user jobs will export shell variables to the user job
        running on the glidein.  Saying 'n' will keep the environment cleaner.  Most configurations
        use 'y' so the user jobs can use those variables if needed.<br/>
        Creating the instance will generate scripts and configurations for the VO frontend.
        Otherwise, you will need to manually run a creation command post-install.
    </td>

    </tr>
    </table>

    (Look at the <a href="../frontend/index.html">glideinWMS manual</a> for more details.)
    
    <p>Here a possible set of answers is presented; your setup will probably be slightly different:</p>

    <pre>
Welcome to the glideinWMS Installation Helper

What do you want to install?
(May select several options at one, using a , separated list)
[1] glideinWMS Schedds and Collector
[2] Glidein Factory
[3] GCB
[4] User Pool Collector
[5] User Schedd
[6] Condor for Glidein Frontend
[7] Glidein Frontend
[8] Components
Please select: <b>7</b>

The following profiles will be installed:
[7] Glidein Frontend


Installing Glidein Frontend

Do you have already a javascriptRRD installation?: (y/n) <b>y</b>
Where is javascriptRRD installed?: /home/frontend/javascriptrrd-0.6.3
Where will you host your config files?: [/home/frontend/frontstage] <b>/home/frontend/frontstage</b>
Where will the web data be hosted?: [/var/www/html/vofrontend] <b>/var/www/html/vofrontend</b>
What Web URL will you use?: [http://frontend1.my.org/vofrontend/] <b>http://frontend1.my.org/vofrontend</b>
Where will you host your log files?: [/home/frontend/frontlogs] <b>/home/frontend/frontlogs</b>
Directory '/home/frontend/frontlogs' does not exist, should I create it?: (y/n) <b>y</b>

Give a name to this Glidein Frontend?: [myVO-vofrontend1] <b>vofrontend1</b>
Give a name to this Glidein Frontend instance?: [v1_0] <b>v1_0</b>

What node is the WMS collector (i.e. the gfactory) running?: <b>gfactory1.my.org</b>
What is the classad identity of the glidein factory?: [gfactory@gfactory1.my.org] <b>gfactory@gfactory1.my.org</b>
What is the WMS collector DN (i.e. subject)?: <b>"/DC=org/DC=doegrids/OU=Service/CN=gfactory/gfactory1.my.org"</b>

To use the Glidein Frontend you need a valid GSI proxy.
Glidein Frontend will use this proxy to talk to the WMS Collector and User Schedd
Where is your proxy located?: <b>/home/frontend/security/grid_proxy</b>

Using DN '/DC=org/DC=doegrids/OU=Service/CN=frontend/frontend1.my.org'
Make sure this DN is in the WMS collector condor_mapfile

For security reasons, we need to know what will the WMS collector map us to.
It will likely be something like joe@gfactory1.my.org
What is the mapped name?: <b>frontenduser1@gfactory1.my.org</b>


We are done with the WMS collector (i.e. gfactory) config
Let's configure the access to the local (user) pool

Using pool collector collector1.ny.org:9618
What is the pool collector DN (i.e. subject)?: <b>/DC=org/DC=doegrids/OU=Services/CN=collector1.my.org</b>

List and secondary pool collector the glideins should use
instead of the main collector.
(leave empty if you want to use the main collector only)
Valid syntaxes are:
 master1.my.org:9620-9624
 master1.my.org:9619
 master3.my.org
Leave an empty collector name when finished.
Collector name:
The following schedds have been found:
 [1] schedd_jobs1@frontend1.my.org
 [2] schedd_jobs2@frontend1.my.org
 [3] schedd_jobs3@frontend1.my.org
 [4] schedd_jobs4@frontend1.my.org
Do you want to monitor all of them?: (y/n) <b>y</b>
Using ['schedd_jobs1@frontend1.my.org', 'schedd_jobs2@frontend1.my.org', 'schedd_jobs3@frontend1.my.org', 'schedd_jobs4@frontend1.my.org']

What is the DN (i.e. subject) for schedd schedd_jobs1@frontend1.my.org?: <b>'/DC=org/DC=doegrids/OU=Services/CN=schedd1.my.org'</b>

What is the DN (i.e. subject) for schedd schedd_jobs2@frontend1.my.org?: <b>'/DC=org/DC=doegrids/OU=Services/CN=schedd1.my.org'</b>
What is the DN (i.e. subject) for schedd schedd_jobs3@frontend1.my.org?: <b>'/DC=org/DC=doegrids/OU=Services/CN=schedd1.my.org'</b>
What is the DN (i.e. subject) for schedd schedd_jobs4@frontend1.my.org?: <b>'/DC=org/DC=doegrids/OU=Services/CN=schedd1.my.org'</b>
What kind of jobs do you want to monitor?: [(JobUniverse==5)&&(GLIDEIN_Is_Monitor =!= TRUE)&&(JOB_Is_Monitor =!= TRUE)]
Give a name to the main group: [main] <b>main</b>
What expression do you want to use to match glideins to jobs?
It is an arbitrary python boolean expression using the dictionaries
  glidein and job
A simple example expression would be:
  glidein["attrs"]["GLIDEIN_Site"] in job["DESIRED_Sites"].split(",")
If you want to match all (OK for simple setups),
  just specify True (the default)
Match string: [True] <b>glidein["attrs"]["GLIDEIN_Site"] in job["DESIRED_Sites"].split(",")</b>

What job attributres are you using in the match expression?
I have computed my best estimate for your match string,
please verify and correct if needed.
Job attributes: [DESIRED_Sites] <b>DESIRED_Sites</b>
What glidein/factory attributres are you using in the match expression?
I have computed my best estimate for your match string,
please verify and correct if needed.
Factory attributes: [GLIDEIN_Site] <b>GLIDEIN_Site</b>
My DN = '/DC=org/DC=doegrids/OU=Service/CN=frontend/frontend1.my.org'

VO frontend proxy = '/home/sfiligoi/.globus/x509_service_proxy'
Do you want to use is to submit glideins: (y/n) [y] <b>n</b>
You may want to use other proxies
Please add all the proxies that this glidein will use

An empty entry means you are done.
proxy fname: <b>/home/frontend/security/x509_glidein_proxy1</b>
proxy fname: <b>/home/frontend/security/x509_glidein_proxy2</b>
proxy fname: <b>/home/frontend/security/x509_glidein_proxy3</b>

proxy fname:
My DNs = ['/DC=org/DC=doegrids/OU=Service/CN=pilot1/myVO.my.org', '/DC=org/DC=doegrids/OU=Service/CN=pilot2/myVO.my.org', '/DC=org/DC=doegrids/OU=Service/CN=pilot3/myVO.my.org']

You will most probably need other DNs in the glidein grid mapfile
Please add all the DNs that this glidein will connect to
(usually the Pool Collector and the Submit nodes)

Please insert all such DNs, together with a user nickname.
An empty DN entry means you are done.

DN: <b>/DC=org/DC=doegrids/OU=Services/CN-collector1.my.org</b>
nickname: [condor001] <b>collector</b>

DN: <b>/DC=org/DC=doegrids/OU=Services/CN=schedd1.my.org</b>
nickname: [condor002] <b>schedd1</b>

DN (leave empty when finished):

Do you want to expose the Grid env. to the user jobs?: (y/n) <b>y</b>
Do you want to create the Glidein Frontend instance (as opposed to just the config file)?: (y/n) [n] <b>n</b>
To create the Glidein Frontend instance, you need to run
/home/frontend/glideinWMS/creation/create_frontend

Configuration files are located in /home/frontend/frontstage/instance_v1.cfg
Remember to set X509_USER_PROXY before starting the daemon
    </pre>

    <p>If you followed the example above, you ended up with a configuration file in</p>
    <blockquote>/home/frontend/frontstage/instance_v1.cfg/frontend.xml</blockquote>
    
    <p>Edit this file to suit your needs and than create the frontend instance with:</p>

    <blockquote>/home/frontend/glideinWMS/creation/create_frontend /home/frontend/frontstage/instance_v1.cfg/frontend.xml</blockquote>

    <h3>6.1. Starting the Glidein Frontend</h3>
    <p>Use the startup script:</p>
    <blockquote>
        source $VDT_LOCATION/setup.sh<br>
        export X509_USER_PROXY=&lt;Proxy that this frontend instance should use&gt;<br>

        cd &lt;install dir&gt;<br>
        ./frontend_startup start
    </blockquote>

    <p>The same script can be used to stop, reconfig and restart the Glidein Frontend.</p>

    <h3>6.2. Reconfiguring the Glidein Frontend</h3>
    <p>The files in the frontend working directory must <b>never be changed by hand</b> after the directory structure has been created. 
    </p>
    <p>
    The proper procedure to update the frontend configuration is to make a copy of the official configuration file 
    (i.e. <i>frontend.xml</i>) as a backup.  Then edit the config file and run
    </p>
    <blockquote>
        &lt;frontend working directory&gt;/frontend_startup reconfig <i>config_copy_fname</i>
    </blockquote>
    <p>
    This will update the directory tree and restart the frontend and group dameons. (If the frontend wasn't running at the time of reconfig it
    will only update the directory tree.)
    </p>
   
    <p>
    Please notice that if you make any errors in the new configuration file, the reconfig 
    script will throw an error and do nothing. If you executed the reconfig command while the frontend was running, it will revert to 
    the last config file and restart with those settings.  As long as you use this tool, you should never corrupt the installation tree.
    </p>
    <p>The frontend_startup script contains a default location for the frontend configuration and is set to the location used for the initial
    install.  This allows you to not have to specify the config location when doing a reconfig.  To change the default location in the file,
    run the command:  
    <blockquote>
        &lt;frontend working directory&gt;/frontend_startup reconfig <i>config_copy_fname</i> update_default_cfg
    </blockquote>
    </p>
    <p><b>NOTE</b>: The reconfig tool does not kill the frontend in case of errors.
    It is also recommended that you disable any groups that will not be used.  Never remove them from the config file.</p>

    </p>
    </div>

<div class="footer">
Banner image by
<a href="http://www.flickr.com/people/leafwarbler/">Madhusudan Katti</a>
used under Creative Commons license.<br>
Original Home URL: <a href="http://www.uscms.org/SoftwareComputing/Grid/WMS/glid%0AeinWMS">http://www.uscms.org/SoftwareComputing/Grid/WMS/glideinWMS</a>.
glideinWMS email support: glideinwms-support at fnal.gov
</div>
</div>
</body>
</html>
