<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta http-equiv="CONTENT-TYPE" content="text/html; charset=UTF-8">
  <title>glideinWMS</title>
  <link rel="stylesheet" type="text/css" href="../common/glideinWMS.css" media="screen, projection" />
</head>

<body lang="en-US" dir="ltr">
    <h1>
        <a href="index.html">GlideinWMS</a>
	<span>The Glidein-based Workflow Management System</span>
    </h1>
    <ul class="breadcrumbs">
        <li><a href="../index.html">Home</a></li>
        <li><a href="./index.html">Components</a></li>
        <li>Prerequisites</li>
    </ul>
    <div class="clear" />
    <div class="leftmenu">
        <ul class="components">
	        <li> <a href="../index.html">Home</a></li>
	        <li> <a href="../download.html">Download</a></li>
	        <li> <a href="../frontend/index.html">Glidein Frontend</a></li>
            <li> <a href="../corral.html">Corral Frontend</a></li>
	        <li> <a href="../factory/index.html">WMS Factory</a></li>
	        <li> <a href="../components/index.html" >Components</a></li>
	        <li> <a href="../components/faq.html" class="last">FAQ</a></li>
        </ul>
        <div class="search">
            <div id="cse-search-form" style="width: 100%;">Loading</div>
            <script src="http://www.google.com/jsapi" type="text/javascript"></script>
            <script src="../common/glidein.js" type="text/javascript"></script>
            <script type="text/javascript">
            google.load('search', '1', {language : 'en', style : google.loader.themes.MINIMALIST});
            google.setOnLoadCallback(onLoad);
            </script>
        </div>
    </div>
    <div id="searchcontent"><h2>Search Results</h2><div id="cse"></div> </div>
<div class="content">
    <div class="heading">
    <h2>Components</h2>
	<ul class="subcomponents">
	     <li> <a href="./index.html">Overview</a></li>
	     <li> Prerequisites</li>
	     <li> <a href="./collector_install.html">User Collector</a></li>
	     <li> <a href="./pool_install.html">User Schedd</a></li>
         <li> <a href="./gsi.html">GSI</a></li>
	     <li class="last"> <a href="./condor.html">Condor</a></li>
	</ul>
        <h3>Prerequisite Component Installation</h3>
	</div>
<div class="jump">
<u>Jump to:</u>
<ol>
    <li><a href="#system_httpd">HTTPD Server</a></li>
    <li><a href="#system_vdt">OSG VDT Client</a></li>
    <li><a href="#system_rrdtool">RRDTool</a></li>
    <li><a href="#system_m2crypto">M2Crypto</a></li>
    <li><a href="#system_javascriptRRD">javascriptRRD</a></li>
</ol>
</div>
<div class="related">
<u><b>Installation Procedure</b></u><br><br>

Preceded by: <a href="../install.html">Installation Overview</a><br>
Followed by: <a href="../factory/install.html">Factory Install</a><br>
<br/>
Install as: various daemon users or as system rpms/packages

</div>
<div class="section">

<h2 class="header">Prerequisite components</h2>
    <p>        
    The following is needed by glideinWMS.  The installer will install Condor but all others should be installed before you begin.  The javascriptRRD directory
    will also need to be provided to the installer.
    </p>
    <table class="requirements">
        <tbody><tr class="head">
            <td>Software</td>
            <td>Version</td>

            <td>WMS collector</td>
            <td>Factory</td>
            <td>User collector</td>
            <td>Submit</td>
            <td>Glidein Frontend</td>
            <td>Comments</td>

        </tr>
        <tr>
            <td> <a href="index.html">glideinWMS</a> </td>
            <td> v3.0+ </td>
            <td class="checked"> y </td>
            <td class="checked"> y </td>

            <td class="checked"> y </td>
            <td class="checked"> y </td>
            <td class="checked"> y </td>
            <td> &nbsp; </td>
        </tr>

        <tr>
            <td> Linux OS </td>
            <td>  </td>
            <td class="checked"> y </td>
            <td class="checked"> y </td>

            <td class="checked"> y </td>
            <td class="checked"> y </td>
            <td class="checked"> y </td>
            <td> A reasonably recent <a target="_blank" href="http://www.cs.wisc.edu/condor/manual/v7.4/1_5Availability.html">Condor-supported</a>
             Linux OS (RH/SL5 tested at press time).</td>
        </tr>
        
        <tr>
            <td> <a target="_blank" href="http://www.cs.wisc.edu/condor/downloads/">Condor</a> </td>
            <td> v7.2.+ </td>
            <td class="checked"> y </td>
            <td> &nbsp; </td>

            <td class="checked"> y </td>
            <td class="checked"> y </td>
            <td class="checked"> y </td>
            <td>The installer will use the tarball or rpm 
            to install and configure Condor inline.  It is recommended to use v7.4 and above.</td>

        </tr>

        <tr>
            <td> <a target="_blank" href="https://twiki.grid.iu.edu/twiki/bin/view/Documentation/WebHome">OSG client</a> </td>
            <td> current version </td>
            <td class="checked"> y </td>

            <td class="checked"> &nbsp; </td>
            <td class="checked"> y </td>
            <td class="checked"> y </td>
            <td class="checked"> y </td>
            <td> Needed to generate grid/voms proxies. See <a href="">below</a> for instructions.</td>

        </tr>
        <tr>
            <td> <a target="_blank" href="http://www.python.org/">Python</a> </td>
            <td> v2.4.3+ </td>
            <td class="checked"> y </td>
            <td class="checked"> y </td>

            <td class="checked"> y </td>
            <td class="checked"> y </td>
            <td class="checked"> y </td>
            <td> &nbsp; </td>
        </tr>

        <tr>
            <td> HTTP server </td>
            <td>  </td>
            <td> &nbsp; </td>
            <td class="checked"> y </td>

            <td> &nbsp; </td>
            <td> &nbsp; </td>
            <td class="checked"> y </td>
            <td> <a target="_blank" href="http://www.apache.org/">Apache</a>, <a target="_blank" href="http://www.stllinux.org/meeting_notes/2001/0719/tux/intro.html">TUX</a>
             or whatever server of choice. This port will need open access to the internet, so worker nodes can download data from this service.</td>
        </tr>

        <tr>
            <td> <a target="_blank" href="http://oss.oetiker.ch/rrdtool/">RRDTool</a> </td>
            <td> V1.2.18+ </td>
            <td> &nbsp; </td>
            <td class="checked"> y </td>

            <td> &nbsp; </td>
            <td> &nbsp; </td>
            <td class="checked"> y </td>
            <td> 
              The perl-Time-HiRes rpm is needed for this package.  Please verify all dependencies: 
              <a href="http://dag.wieers.com/rpm/packages/rrdtool/rrdtool-1.2.18-1.el4.rf.i386.rpm" target="_top">rrdtool-1.2.18-1.el4.rf.i386.rpm</a> <br>
              <a href="http://dag.wieers.com/rpm/packages/rrdtool/perl-rrdtool-1.2.18-1.el4.rf.i386.rpm" target="_top">perl-rrdtool-1.2.18-1.el4.rf.i386.rpm<br>
              <a href="http://dag.wieers.com/rpm/packages/rrdtool/python-rrdtool-1.2.18-1.el4.rf.i386.rpm" target="_top">python-rrdtool-1.2.18-1.el4.rf.i386.rpm<br>
            </td>

        </tr>
        <tr>
            <td> <a target="_blank" href="http://freshmeat.net/projects/m2crypto">M2Crypto</a> </td>
            <td> v0.17+ </td>
            <td> &nbsp; </td>
            <td class="checked"> y </td>

            <td> &nbsp; </td>
            <td> &nbsp; </td>
            <td> y </td>
            <td> This can be installed using yum, if available. Or via 
            <a target="_blank" href="http://chandlerproject.org/Projects/MeTooCrypto#Downloads" target="_top">tarball</a>. 
            </td>

        </tr>
        <tr>
            <td> <a target="_blank" href="http://sourceforge.net/projects/javascriptrrd/">javascriptRRD</a> (with flot)</td>
            <td> v0.6.3+ </td>
            <td> &nbsp; </td>

            <td class="checked"> y </td>
            <td> &nbsp; </td>
            <td> &nbsp; </td>
            <td class="checked"> y </td>
            <td> <b>Note:</b> JavascriptRRD and flot, are available from different sources however they may not always work when installed 
            separately for glideinWMS. We only support JavascriptRRD with Flot available from the sourceforge link provided.</td>
        </tr>
    </tbody></table>
    <br/>
    <h4>NOTE:</h4>
    <ul>
        <li>Condor version v7.3.1 has a known issue with incorrect return/exit codes of condor_status and condor_q</li>
        <li>
            If you are using Condor version v7.3.2 disable VOMS checking in condor_config file used by Condor daemons other 
            than that used by user schedd. VOMS checking adds unrequired overhead. To do so, set <br>

            <blockquote>USE_VOMS_ATTRIBUTES = False </blockquote> 
            or for individual condor daemons like collector<br>
            <blockquote>COLLECTOR.USE_VOMS_ATTRIBUTES = False </blockquote> 
        </li>
    </ul>
</div>    

<div class="section">
    <h2><a name="system_httpd">1. HTTP server</a></h2>
    <p>
    You will need to install an HTTP server for glideinWMS to be used for staging and monitoring.  This needs to be installed on a port 
    accessible to the outside.  
    The server should be installed on the same node, but a different node can be used as long as the web area is writable from this one.  
    In particular, the staging directory will need to be accessible 
    to glideins so they can download appropriate software.
    </p>
    <p> 
        The choice of web server is independent of glideinWMS, but this tutorial will only
        show the example of Apache Web Server.  For most systems, this can be installed via
        yum:
        <pre>
        yum install httpd </pre>
    </p>
    <p>
        Other options are available from Apache 
        <a href="http://httpd.apache.org/download.cgi">here</a>.
    </p> 
    <p>
        There are several recommended tasks you may want to 
        also do post-installation to secure and prepare your web server.
        <ul>
            <li>Disable all unneeded modules.  Glideinwms does not any
            non-standard modules and many can be disabled.
            A list of example modules to keep enabled is below:
            <tt>'access_module','include_module','log_config_module',
                    'mime_magic_module','expires_module','deflate_module',
                    'headers_module','setenvif_module','mime_module',
                    'status_module','autoindex_module','negotiation_module',
                    'dir_module','imap_module','alias_module','rewrite_module',
                    'cache_module','file_cache_module','mem_cache_module',
                    'authz_host_module','authz_default_module'</tt>.
            </li>
            <li>Disable any (unneeded) extensions in /etc/httpd/conf.d </li>
        </ul>
    </p>
</div>


<div class="section">
    <h2><a name="system_vdt">2. OSG VDT Client</a></h2>
    <p>
        The OSG Client is now available as a set of RPMs.  To install
        the OSG Client, you will need to enable the EPEL and OSG
        repositories.  It is also advisable to enable the yum priorities
        module in order to guarantee the correct packages.
        The following commands will enable the repositories:
        <pre>
        rpm -Uvh http://download.fedora.redhat.com/pub/epel/5/i386/epel-release-5-4.noarch.rpm
        yum install yum-priorities
        rpm -Uvh http://repo.grid.iu.edu/osg-release-latest.rpm </pre>
        Next, you can install osg client:
        <pre> yum install osg-client </pre>
        You may also want to enable the fetch-crl service
        to keep your certificate revocation lists up to date:
        <pre>
        fetch-crl
        /sbin/service fetch-crl-boot start
        /sbin/service fetch-crl-cron start
        /sbin/chkconfig fetch-crl-boot on
        /sbin/chkconfig fetch-crl-cron on </pre>
    </p>
</div>


<div class="section">

    <h3><a name="system_rrdtool">3. RRDTool</a></h3>
    <p>
        You will also need the python module for <a target="_blank" href="http://oss.oetiker.ch/rrdtool/">RRDTool</a> (v1.2.18 or later). Many 
        systems come with packages for it; if possible use that.
    </p>

    <p>
        RPMs for Redhat/Scientific Linux distributions can be found  
        <a target="_blank" href="http://dag.wieers.com/rpm/packages/rrdtool/">here</a>.
        <br/>
        However, if you have the OSG repositories enabled, you can install it via yum:
        <pre> yum install rrdtool rrdtool-python </pre>
    </p>

    <p>
        If installing as root is not an option, you can build from the sources, as the <b>glidein factory</b>

        user, and put the python libraries into the PYTHON_PATH.<br>
        The source code can be downloaded from <a target="_blank" href="http://oss.oetiker.ch/rrdtool/pub/">here</a>. 
        Beware: The build process has several dependencies that make it complicated. Use this option only if you cannot install from RPMs 
        (or similar). 
    </p>
</div>

<div class="section">

    <h3><a name="system_m2crypto">4. M2Crypto</a></h3>

    <p>
        You will need the <a target="_blank" href="http://freshmeat.net/projects/m2crypto">M2Crypto python library</a>. 
        However, if you have the OSG repositories enabled, you can install it via yum:
        <pre> yum install m2crypto </pre>
    </p>

    <p>

        If your system does not come with m2crypto package, or you do not can/want install it as root, compile it from source as 
        the <b>glidein factory</b> user.<br>  The source code can be downloaded from   
        <a target="_blank" href="http://chandlerproject.org/Projects/MeTooCrypto#Downloads">here</a>.
    </p>

    <p>The build process is very easy:</p>

    <blockquote>

        python setup.py build<br>
        python setup.py install --root <i>&lt;base dir&gt;</i>
    </blockquote>

    <p>
        Finally add M2Crypto site-packages into the PYTHONPATH, possibly in the .profile, .bashrc and/or in the .cshrc.<br>
        The exact path is system specific. On a 32bit system with python 2.3.x it will look like this:
    </p>

    <blockquote>export PYTHONPATH=$PYTHONPATH:<i>&lt;base dir&gt;</i>/usr/lib/python2.3/site-packages/</blockquote>
    <br>
</div>


<div class="section">

    <h3><a name="system_javascriptRRD">5. javascriptRRD</a></h3>

    <p>
        You will need the <a target="_blank" href="http://sourceforge.net/projects/javascriptrrd/">javascriptRRD package</a>.  It contains the 
        javascript libraries needed by the monitoring.  
        If you enabled the OSG repositories (above),
        you can install it via yum:
    </p>
    <pre> yum install javascriptrrd </pre>
    <p>
        Otherwise, download the tarball (with flot), and untar it.  You will need to 
        point the installer to this directory.
    </p>

</div>
<div class="footer">
Banner image by
<a href="http://www.flickr.com/people/leafwarbler/">Madhusudan Katti</a>
used under Creative Commons license.<br>
Original Home URL: <a href="http://www.uscms.org/SoftwareComputing/Grid/WMS/glid%0AeinWMS">http://www.uscms.org/SoftwareComputing/Grid/WMS/glideinWMS</a>.
glideinWMS email support: glideinwms-support at fnal.gov
</div>
</div>
</body>
</html>
