<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta http-equiv="CONTENT-TYPE" content="text/html; charset=UTF-8">
  <title>glideinWMS</title>
  <link rel="stylesheet" type="text/css" href="../common/glideinWMS.css" media="screen, projection" />
</head>

<body lang="en-US" dir="ltr">
    <h1>
        <a href="index.html">GlideinWMS</a>
	<span>The Glidein-based Workflow Management System</span>
    </h1>
    <ul class="breadcrumbs">
        <li><a href="../index.html">Home</a></li>
        <li><a href="./index.html">Components</a></li>
        <li>Configuration Installer</li>
    </ul>
    <div class="clear" />
    <div class="leftmenu">
        <ul class="components">
	        <li> <a href="../index.html">Home</a></li>
	        <li> <a href="../download.html">Download</a></li>
	        <li> <a href="../frontend/index.html">Glidein Frontend</a></li>
            <li> <a target="_blank" href="../corral.html">Corral Frontend</a></li>
	        <li> <a href="../factory/index.html">WMS Factory</a></li>
	        <li> <a href="../components/index.html" >Components</a></li>
	        <li> <a href="../components/faq.html" class="last">FAQ</a></li>
        </ul>
        <div class="search">
        <div id="cse-search-form" style="width: 100%;">Loading</div>
        <script src="http://www.google.com/jsapi" type="text/javascript"></script>
        <script src="../common/glidein.js" type="text/javascript"></script>
        <script type="text/javascript">
            google.load('search', '1', {language : 'en', style : google.loader.themes.MINIMALIST});
            google.setOnLoadCallback(onLoad);
        </script>
        </div>
    </div>

    <div id="searchcontent"><h2>Search Results</h2><div id="cse"></div> </div>
<div class="content">
    <div class="heading">
    <h2>Installation</h2>
	<ul class="subcomponents">
	     <li> Overview</li>
	     <li> <a href="./prerequisites.html">Prerequisites</a></li>
	     <li> <a href="./collector_install.html">User Collector</a></li>
	     <li> <a href="./pool_install.html">User Schedd</a></li>
         <li> <a href="./gsi.html">GSI</a></li>
	     <li class="last"> <a href="./condor.html">Condor</a></li>
	</ul>
        <h3>Configuration-Based Installer</h3>
	</div>
    <div class="jump">
    <u>Jump to:</u>
    <ol>
        <li> <a href="#overview">Overview</a></li>
        <li> <a href="#procedure">Procedure</a></li>
        <li> <a href="#manage_script">manage-glideins script</a></li>
        <li> <a href="#ini_examples">Sample ini-files</a></li>
    </ol>
    </div>

    <div class="related">
    <u><b>Installation Procedure</b></u><br/><br/>

        <a href="../install.html">Installation Overview</a><br><br>

        Configuration-based installer is an
        alternative to the standard procedure.
    </div>

<!- ----------  Overview ------------ -->
<div class="section">
<a name="overview" />
<h2>Overview</h2>
<p>
This installer uses a configuration file (ini format) to perform the installation of the glideinWMS services in lieu of a question/answer (q/a) type installer. It requires knowledge and planning of the glideinWMS services just as the the q/a installer did. The major difference is that you essentially pre-answer all the questions previously asked and document them in the ini file. In addition to having them documented, this performs the actual installation faster and allows for re-installs more quickly when some of the attribute values are incorrect (an inevitable consequence of a complex set of services such as these).
</p><p>
Another major difference, with this installer, is that it does NOT modify any scripts that set a user environment upon log in, e.g., .bashrc file, /etc/profile.d files, et al. Instead, an environment script is created for each service in its respective "home" location. If inclusion of these scripts is required at a location, it will need to be performed manually. The only exception to this is when privilege separation is in effect, in which case, the /etc/condor/privsep_config file is created. This location is hard-coded in Condor and cannot be changed. 
For each of the glideinsWMS services, the scripts for setting the environment are:
<ul>
<li><b>wmscollector, usercollector, submit</b>: condor_location/condor.sh</li>
<li><b>factory</b>: install_location/factory.sh</li>
<li><b>vofrontend</b>: install_location/frontend.sh</li>
</ul>
</p>
</p><p>
For glideinWMS services using Condor, the CONDOR_LOCATION/config.d directory
will contain the Condor attributes required for that service.

</div>

<div class="section">
<a name="procedure" />
<h2>Installation Procedure</h2>
Installation proceeds in the same order as the dialog installer:
<ol>
<li>WMS Collector</li>
<li>WMS Factory</li>
<li>User Collector</li>
<li>User Schedd (submit node)</li>
<li>Glidein Frontend (or Corral Frontend)</li>
</ol>
Services have dependencies between them.  If you get an error or change
the ini file, it is recommended that you go back and re-install ALL services.
Prior to actually doing the install, it is suggested you use the '--validate'
option on all nodes to resolve any errors affecting dependencies.
</div>

<div class="section">
<a name="manage_script" />
<h2> manage-glideins script </h2>

The script used to perform the installations is <i>glideinWMS/install/manage-glideins</i>.  
<p></p>

<b>./manage-glideins --OPTION SERVICE --ini INIFILE [--ssh [user]]  [--debug]</b><br/>
<ul>
This usage can be used to install, start, stop or check the status of
the glidein services based on the configuration in the specified ini file.
<p> 
<b>OPTION</b> can be one of:</br>
 - <b>validate</b>: Allows you to validate the ini file prior to installation</br>
 - <b>install</b>: Install the service</br>
 - <b>configure</b>: This allows  you to reconfigure your service based on 
     changes to the ini file without re-installing condor.<br/>
     For services using Condor, it will update the config.d local config files,<br/> 
     For the factory and vofrontend, it will update the respective xml config files.</br>
 - <b>start</b>: Start the service.  Remote starting of services is possible if remote access (via ssh) is allowed.</br>
 - <b>stop</b>: Stop the service.  Remote starting of services is possible if remote access (via ssh) is allowed.</br>
 - <b>status</b>: Return the status of the service.  Remote starting of services is possible if remote access (via ssh) is allowed.</br>
</p><p>

<b>SERVICE</b> can be one of:</br>
 - wmscollector</br>
 - usercollector</br>
 - factory</br>
 - submit</br>
 - vofrontend</br>
 - rpm (Used for OSG Frontend RPM sites. Note: The 'install' action is not allowed for this service.)</br>
 - all: can only be used with start/stop/status actions</br>
</p><p>
</p><p>
<b>--ssh</b>: allows the start/stop/status actions to be performed 
remotely providing the user has valid access to the other service's node via 
'ssh -l' using the service's username.  The '--ssh' will use the ini file
specified username attribute unless an optional 'user' is specified.
</p><p>
<p>
<b>--debug</b>: When used with start/stop/status actions, it will
display the series of commands used.
</ul>

<b>./manage-glideins --install-node --ini INIFILE</b>
<ul>
This usage allows you to install all services for the node you are installing
on. There are some limitation to this.
</ul>

<b>./manage-glideins --create-entries --ini INIFILE</b>
<ul>
This usage can be used to select new glidein entry points after the
initial installation of a factory service. If will walk you through the same
question and answer process querying ReSS and allowing for manual entries.
It will then create a file containing the entry elements for those selected. 
This can then be merged with the existing Factory configuration file
and a reconfiguration performed.. 
</ul>

<b>./manage-glideins --create-group --ini INIFILE</b>
<ul>
This usage can be used to select new group selection criteria after the
initial installation of a frontend service. If will walk you through the same
question and answer process as during the installation.
It will then create a file containing the group element for the criteria selected.
This can then be merged with the existing frontend configuration file
and a reconfiguration performed.. 
</ul>

<b>./manage-glideins --show-ini INIFILE</b>
<ul>
This option allows you to view the ini file options/values. This is especially useful
when the DEFAULT section is used to apply values to all sections/services.
</ul>

<b>./manage-glideins --create-template SERVICE</b>
<ul>
This option allows you to create an ini file template for installing a single 
service.  It contains all the required attributes for that service.  It should
be understood that many of the validations that would normally insure a
working installation are bypassed since those validations are normally 
performed on the node for those services.

</ul>
</div>

<div class="section">
<h2>glideinWMS ini file</h2>
<p>
The ini file determines the installation and configuration of the various services.  All ini file attributes are required. However, in several cases the value may be left empty. These should be noted in the comments column of the tables. 
</p>
<p><b>
The configuration based installer <b>requires</b> that the same ini file be used
for all service installations.  There are several areas where data is required
from other services.  Since most services can be installed on separate hosts, the installer can only valididate data for the node being installed.
</p></b>


<h3>Default Section</h3>
<p>
The attributes in this section apply to all subsequent sections in the ini file unless they are overridden specifically in that section.  So, if the location/value of any option(s) in this section varies from host to host, you will need to override them in that section of the ini file. The only options in the <i>glideinWMS.ini</i> template will be the pacman options in the next section.
</p>
<h4>Pacman options</h4>
The 2 pacman related attributes are used to bring down the OSG/VDT client software 
and CA certificates if they are not already installed on the node. 
If you already have the OSG/VDT client and CA certificates installed on a host
or you have already installed the CA certificates and are using other non-VDT client software for proxy renewals, then:<br/>
&nbsp;- these options are still required but may be empty, i.e., contain no value.<br/>
&nbsp;- the vdt_location option is still required but may be empty.<br/>
&nbsp;- the install_vdt_client should be set to 'n'.<br/>
</p><p>
<b>These are parts of the pacman related options below that should not be 
changed unless advised to by glideinwms-support as there 
may be compatiblity issues between pacman and VDT distributions. 
The comments column will provide the specifics.
</b>

</p>
    <table class="attributes">
        <tbody><tr class="head">
        <td>Attribute</td>
        <td>Example</td>
        <td>Description</td>
        <td>Comments</td>
        </tr>

        <tr>
            <td>pacman_location</td>
            <td>/path-to-pacman/pacman-3.28</td>
            <td>This will be the directory in which pacman is installed.</br>
            </td>
            <td>
             The base level (e.g., pacman-3.28) will be used to select the
             pacman tarball from the pacman_url option.</br>
             The format is pacman-version.tar.gz.</br>
	     The tarball will be retrieved using the <b>pacman_url</b> option, 
             extracted and then removed.</br></br>
             You will need to specify the path to the directory, <b>pacman-3.28</b>.  
             If you already have pacman-3.28 installed on your node, the installer
             will not attempt to bring a new pacman down.  You may utitize that 
             directory.
                <b>
            </td>
        </tr>

        <tr>
            <td>pacman_url</td>
            <td>http://physics.bu.edu/pacman/sample_cache/tarballs</td>
            <td>URL to retrieve pacman.</br>
            </td>
            <td>
             <b>This is the one pacman option you should not change.</b>
            </td>
        </tr>
    </tbody></table>
</div>

<!-- -------------- WMS Collector -------------------- -->
<div class="section">
<h3>WMSCollector section</h3>

Under most circumstances, installation of wmscollector using manage-glideins
will be need to run as <b>root</b>, since Condor installations require some files 
to be owned by root in order to properly use privilege separation.
<blockquote>
    ./manage-glideins --install wmscollector --ini glideinWMS.ini
</blockquote>

See below for the ini file attributes that installing/running WMS collector requires:<br/><br/>

    <table class="attributes">
        <tbody><tr class="head">
        <td>Attribute</td>
        <td>Example</td>
        <td>Description</td>
        <td>Comments</td>
        </tr>

        <tr>
        <td>install_type</td>
        <td>tarball</td>
        <td>Indicates this is a Condor tarball installation.<br/>
            At this time, for the WMS Collector, only tarball installations
            are supported.
        </td>
        <td>Valid values: tarball<br/>
        </td>
        </tr>

        <tr>
        <td>hostname</td>
        <td>wmscollectornode.domain.name</td>
        <td>     hostname for WMS Collector. </td>
        <td>The WMS collector and Factory must be collocated at this time.</td>
        </tr>

        <tr>
        <td>username</td>
        <td>condor (or whatever non-root user you decide on) </td>
        <td>UNIX user account that this services will run under. <b>DO NOT use "root".</b> </td>
        <td>
            For security purposes, this value should always be a non-root user.<br/>
            <b>However</b>, if privilege separation is used 
            (see the <b>privilege_separation</b> option), the manage-glideins 
            script itself will need to be run as root (see above), since
            the Condor switchboard requires some files to be 
            owned by root and some files to
            be owned by the non-superuser <b>username</b> for privilege separation
            to work correctly.
        </td>
        </tr>

        <tr>
        <td>service_name</td>
        <td>condor-wms </td>
        <td>Used as the 'nickname' for the GSI DN in the condor_mapfile of other services.   </td>
        <td>.</td>
        </tr>

        <tr>
        <td>condor_location</td>
        <td>/path/to/condor-location</td>
        <td>Directory in which the condor software will be installed. </td>
        <td>
           <b>IMPORTANT:</b> 
              The WMS Collector and Factory are always installed on the same node.
              The <b>condor_location</b> must not be a subdirectory of the Factory's 
              <b>install_location</b>, <b>logs_dir</b> or <b>client_log(proxy)_dir</b>.  
              They may share the same parent, however.
        </td>
        </tr>

        <tr>
        <td>collector_port</td>
        <td>9618 (condor default)</td>
        <td>Defines the Condor Collector port. </td>
        <td>Optional: default is 9618 (Condor default)<br/>
            If multiple glidein services are installed on the same node, this should be unique for each service. 
        </td>
        </tr>

        <tr>
        <td> <a name="privilege_separation"/> privilege_separation</td>
        <td align="center">y</td>
        <td>See the <a target="_blank" href="http://www.cs.wisc.edu/condor/manual/v7.2/3_6Security.html#SECTION004612000000000000000">Condor Privilege Separation  Documentation</a> for more information</td>
        <td>Valid values:<br/>
            * <b>y</b> - privilege separation is used<br/>
            * <b>n</b> - privilege separation is not used <br/>
        </td>
        </tr>

        <tr>
        <td>frontend_users </td>
        <td>frontend_service_name : unix_account </td>
        <td>Maps the vofrontend's service name to the UNIX account that has been created for it.  Only one frontend service can be specified on install. 
        </td>
        <td>The format is: <b>service_name : unix account </b><br/>
        If <b>privilege_separation</b> is specified, this must specify
        the unique UNIX user account you set up for that frontend service.</br>
        If <b>privilege_separation</b> is <b>not</b> specified, this must be the
        factory username.</br>
        </td>
        </tr>

        <tr>
        <td>x509_cert_dir</td>
        <td>/path/to/certificates-location </td>
        <td>The directory where the CA certificates are maintained. 
        <td>The installer will validate for the precesence of *.0 and *.r0 files.
            If the CAs are installed from the VDT distribution, this will be
            the VDT_LOCATION/globus/TRUSTED_CA directory.</td>
        </td>
        </tr>

        <tr>
        <td>x509_cert</td>
        <td>/path-to-cert-location/cert.pm</td>
        <td>The location of the certificate file being used.</td>
        <td>
           This file must be owned by the user installing (starting/stopping)
           this service.  Permissions should be 644 or 600.
        </td>
        </tr>

        <tr>
        <td>x509_key</td>
        <td> /path-to-cert-location/key.pm </td>
         <td>The location of the certificate key file being used and 
             associated with the certtificate defined by the <b>x509_cert</b>
             option above.
        </td>
         <td>
           This file must be owned by the user installing (starting/stopping)
           this service.  Permissions should be 600 or 400.
        </td>
        </tr>

        <tr>
        <td>x509_gsi_dn</td>
        <td>dn-subject-of-x509_cert-using-openssl</td>
        <td>
            This is the identity of the certificate used by this service to 
            contact the other Condor based glideinWMS services.
        <td>
            This is the <i>subject</i> of the certificate 
            (<b>x509_cert</b> option).
            <blockquote>
            openssl x509 -subject -noout -in [<b>x509_cert</b>]<br/>
            </blockquote>
            It is used to populate the condor_config file GSI_DAEMON_NAME and condor_mapfile entries of this and the other glideinWMS services as needed.
        </td>
        </td>
        </tr>

        <tr>
        <td>condor_tarball</td>
        <td>/path/to/condor/tarballs/condor-7.5.0-linux-x86-rhel3-dynamic.tar.gz</td>
        <td>Location of the condor tarball.</td>
        <td>
         The installation script will perform the installation of condor using this tarball.
It must be a zipped tarball with a *.tg.tz name.
        </td>
        </tr>

        <tr>
        <td>condor_admin_email</td>
        <td>whomever@email.com</td>
        <td>The email address to get Condor notifications in the event of a problem.</td>
        <td>Used in the condor_config.local only.    </td>
        </tr>

        <tr>
        <td>number_of_schedds</td>
        <td align="center">   5</td>
        <td>The desired number of schedds to be used.    </td>
        <td>There must be at least 1 schedd.</td>
        </tr>

        <tr>
          <td>install_vdt_client</td>
          <td align="center">y</td>
          <td>Indicates if an OSG/VDT client should be installed if it is not already present in the <b>vdt_location</b> option location.  
            </td>
          <td>
Valid values:</br>
* <b>y</b> - installer will install a VDT client using the <b>vdt_location</b> and <b>pacman_location/_url</b> options specified.</br>
* <b>n</b> - will not attempt to install the VDT client<br/><br/>
This installer will not attempt to reinstall this software if it is already 
present.</br>
          </td>
        </tr>

        <tr>
            <td>vdt_location</td>
            <td>/path/to/glidein/vdt</td>
            <td>The location of the OSG/VDT client software.</td>
            <td>
The installer looks for the existence of 2 files to verify if this is a valid 
OSG/VDT client installation:</br>
1. setup.sh</br>
2. existence of a voms-proxy-init executable.</br></br>
If the <b>install_vdt_client</b> option is 'n', then this option's value should 
be empty/blank.</br>
            </td>
        </tr>

        <tr>
        <td> glideinwms_location</td>
        <td>     /path/to/glideinWMS    </td>
        <td>Directory of the glideinWMS software.</td>
        <td>   Since this is a Condor service only, this software is only used during the installation process. </td>
        </tr>
    </tbody></table>
</div>

<!-- -------------- Factory -------------------- -->
<div class="section">
<h2>Factory Section</h2>
The manage-glideins script should be run as the factory user when installing
the WMS Factory (see the <b>username</b> option below).
<blockquote>
    ./manage-glideins --install factory --ini glideinWMS.ini
</blockquote>

See below for the ini file attributes that installing/running WMS factory 
requires:<br/><br/>

    <table class="attributes">
        <tbody><tr class="head">
        <td>Attribute</td>
        <td>Example</td>
        <td>Description</td>
        <td>Comments</td>
        </tr>

        <tr>
        <td>install_type</td>
        <td>tarball</td>
        <td>Indicates this is a Condor tarball installation.</br>
            At this time, for the Factory, only tarball installations
            are supported.
        </td>
        <td>Valid values: tarball.<br/>
        </td>
        </tr>

        <tr>
            <td>hostname</td>
            <td>wmscollector.domain.name</td>
            <td>hostname for Factory.</td>
            <td>The WMS collector and Factory must be collocated at this time.</td>
        </tr>

        <tr>
            <td>username</td>
            <td>factory user</br>(non-root account)</td>
            <td>UNIX user account that this service will run under. <b>DO NOT use "root"</b>. </td>
            <td>For security purposes, this value should always be a non-root user.  Although the WMS Collector and Factory must be co-located, they can be run as independent users.</td>
        </tr>

        <tr>
            <td>service_name</td>
            <td>factory-wms</td>
            <td>Used as the 'nickname' for the GSI DN in the condor_mapfile of other services.   </td>
            <td>.</td>
        </tr>

        <tr>
        <td>install_location</td>
        <td>/path/to/glidein/factory</td>
        <td>HOME directory for the factory software.</td>
        <td>When the factory is created the following files/directories will 
            exist in this directory:<br/>
            * factory.sh - environment script<br/>
            * glidein_[instance_name].cfg - the factory configuration file<br/>
            * glidein_[instance_name] - directory containing the factory files<br/>
             <br/>
             The install script will create this directory if it does not exist. 
        </td>
        </tr>

        <tr>
            <td>logs_dir</td>
            <td>/path/to/factory/logs  </td>
            <td>User settable location for all Factory log files.</td>
            <td>Beneath this location there will be multiple sets of logs:</br> 
                * for the factory as a whole</li</br>
                * for each entry point the factory utilizes</br>
             <br/>
             The install script will create this directory if it does not exist. 
            </td>
        </tr>

        <tr>
            <td>client_log_dir<br/>
                client_proxy_dir</td>
            <td>/path/to/client/log_location<br/>
                /path/to/client/proxy_location</td>
            <td>User settable location for all client (VOFrontend) log and 
                proxy files.</td>
    <td>
         <b><a href="#privilege_separation">If privilege separation is used</a>,</b><br/>
              * then the entire path (inclusive of this directory) must be 
                 root-writable-only (0755 and owned by root).<br/>
              * these directories cannot be sub-directories of the Factory's 
                <b>install_location</b> or <b>logs_dir</b>.<br/>
            <br/>
        <b><a href="#privilege_separation">If privilege separation is not used</a>,</b><br/>
              * then the directory can be independent, or nested as a subdirectory, of the Factory's
                <b>install_location</b> or <b>logs_dir</b>.<br/>
            <br/>
              If the above requirements are satisfied, the install script will create
              the necessary directories.  If not, a permissions error will likely result.
           </td>
        </tr>

        <tr>
            <td>instance_name</td>
            <td align="center">v2_5</td>
            <td>Used in naming files and directories.</td>
            <td>.</td>
        </tr>

        <tr>
            <td> <a name="use_vofrontend_proxy"/a> use_vofrontend_proxy</td>
            <td align="center">y</td>
            <td>Specifies if the VO Frontend or Factory proxy should be used on the glidein pilot jobs submitted to the entry points.
            </td>
            <td>Valid values:</br>
             * <b>y</b> - only VO Frontend proxies will be used</br>
             * <b>n</b> - VO Frontend proxies will be used if available otherwise the Factory 
                  will provide the proxy. 
            </td>
        </tr>

        <tr>
          <td>x509_proxy</td>
          <td>/path-to-proxy/x509_proxyfile </td>
          <td>The location of factory pilot proxy.</td>
          <td>If the Factory <b>use_vofrontend_proxy</b> option is:</br>
              * <b>y</b> - this must be empty</br>
              * <b>n</b> - this must be populated</br>
             An X509_USER_PROXY variable using this value 
             will set be in the factory environment script that is created 
             during the installation.
          </td>
        </tr>

        <tr>
          <td>x509_gsi_dn</td>
          <td>dn-issuer-of-x509_proxy-using-openssl</td>
          <td>The issuer of the Factory pilot proxy specified by the 
              Factory <b>x509_proxy</b> option</td>
          <td>If the Factory <b>use_vofrontend_proxy</b> option is:</br>
              * <b>y</b> - this must be empty</br>
              * <b>n</b> - this must be populated</br>
              To obtain the issuer, use:
              <blockquote>openssl x509 -issuer -noout -in [x509_proxy]</blockquote>
              This is used in the UserCollector condor_mapfile and 
              condor_config.local so the glidein pilot can communicate with the 
              UserCollector.
         </td>
        </tr>

        <tr>
            <td> use_glexec</td>
            <td align="center">y</td>
            <td>Used to specify how user submitted jobs (not glidein pilots) are authorized on the WN nodes for an entry point<br/>
            </td>
            <td>  
            With gLexec, the individual user's proxy submitted with their job 
            is used to authorize the job and is reflected in the accounting.</br>
            Without gLexec, the glidein pilot job's proxy is used and only 
            that user account is reflected in the accounting.</br>
            Valid values:</br>
            * <b>y</b> - downloads and uses gLexec.</br>
            * <b>n</b> - glidein pilot proxy is used</br>
            </td>
        </tr>

        <tr>
            <td>use_ccb</td>
            <td align="center">n</td>
            <td>Indicates if CCB should be used or not.</td>
            <td>Valid values:</br>
* <b>y</b> - uses CCB</br>
* <b>n</b> - does not use CCB  </br> 
        </tr>

        <tr>

            <td> ress_host</td>
            <td>osg-ress-4.fnal.gov</td>
            <td>Identifies the ReSS server to be used to select entry points (CEs) to submit glidein pilot jobs to.
            <td>
              The only validation performed is to verify if that server exists.   </br>
             Valid OSG values:</br>
              * <b>osg-ress-1.fnal.gov</b> - OSG Production </br>
              * <b>osg-ress-4.fnal.gov</b> - OSG ITB </br>
        </tr>

        <tr>

            <td>entry_vos</td>
            <td align="center">cms, dzero</td>
            <td>A comma delimited set of VOs used to select the entry points that glideins can be submitted to.</td>
            <td>These are the used as the initial criteria in querying ReSS for glidein entry points.</td>
        </tr>

        <tr>

            <td>entry_filters</td>
            <td>(int(GlueCEPolicyMaxCPUTime) &lt;(25*60))</td>
            <td>An additional entry point (CE) filter for insuring that specific resources are available.   </td>
            <td>After the initial set of entry points have been selected using the <b>entry_vos</b> criteria, these filters are applied.  The format is a python expression using Glue schema attributes.</td>
        </tr>

        <tr>
          <td>install_vdt_client</td>
          <td align="center">y</td>
          <td>Indicates if an OSG/VDT client should be installed if it is not already present in the <b>vdt_location</b> option location.
            </td>
          <td>
Valid values:</br>
* <b>y</b> - installer will install a VDT client using the <b>vdt_location</b> and <b>pacman_location/_url</b> options specified.</br>
* <b>n</b> - will not attempt to install the VDT client<br/><br/>
This installer will not attempt to reinstall this software if it is already 
present.</br>
          </td>
        </tr>

        <tr>
            <td>vdt_location</td>
            <td>/path/to/glidein/vdt</td>
            <td>The location of the OSG/VDT client software.</td> 
            <td>
The installer looks for the existence of 2 files to verify if this is a valid 
OSG/VDT client installation:</br>
1. setup.sh</br>
2. existence of a voms-proxy-init executable.</br></br>
If the <b>install_vdt_client</b> option is 'n', then this option's value should 
be empty/blank.</br>
            </td>
        </tr> 


        <tr>
        <td> glideinwms_location</td>
        <td>     /path/to/glideinWMS    </td>
        <td>Directory of the glideinWMS software.</td>
        <td>This software is used for both the installation and during the actual running of this glidein service.</td>
        </tr>


        <tr>
        <td>web_location    </td>
        <td>/var/www/html/factory</td>
        <td>
          Specifies the location for the monitoring and staging data that must
          be accessible by web services. The installer will create the 
          following directories in this location:<br/>
          1. <b>web_location/monitor</b><br/>
          2. <b>web_location/stage</b><br/>
        </td>
        <td><b>Important:</b>
           This should be created before installing this service as the
           service's <b>username</b> and the web server user are generally
           different.  This script will not be able to create this directory
           with proper ownership.
        </td>
        </tr>

        <tr>
        <td>web_url     </td>
        <td>http://%(hostname)s:port     </td>
        <td>Identifies the url used by the glidein pilots to download
            necessary software and to record monitoring data.<br/>
            In order to insure consistency, the installer will take the 
            unix basename of the <b>web_location</b> and append it to the 
            <b>web_url</b> value.
            So, for the value shown below in the <b>web_location</b>, the actual value
            used by the glidein pilots, will be <b>web_url/factory/stage(monitor)</b>.
          
        </td>
        <td><b>Important:</b>
            It may be a good idea to verify that the port specified is 
            accessible from off-site as some sites restrict off-site access to
            some ports.
        </td>
        </tr>

        <tr>
            <td>javascriptrrd_location</td>
            <td>/path/to/javascriptrrd</td>
            <td>Identifies the location of the javascript rrd software. </td>
            <td>This installation must include the <i>flot</i> processes in the
                parent directory.<br/>
            </td>
        </tr>

        <tr>
        </tr>
    </tbody></table>
</div>

<!-- -------------- User Collector -------------------- -->
<div class="section">
<h2>User Collector Section</h2>
The pool Collector can be installed either as root or as a non privileged user. Either case, make sure that the user has access to the needed GSI credentials. 
There is no real advantage to install as root, so non-privileged installation is recommended if installed separately.
<blockquote>
    ./manage-glideins --install usercollector --ini glideinWMS.ini
</blockquote>

See below for the ini file attributes that installing/running user collector requ
ires:<br/><br/>

    <table class="attributes">
        <tbody><tr class="head">
        <td>Attribute</td>
        <td>Example</td>
        <td>Description</td>
        <td>Comments</td>
        </tr>

        <tr>
        <td>install_type</td>
        <td>tarball or rpm</td>
        <td>
            If this is a VOFrontend RPM installation and you are doing a
            '--configure', then rpm should be specified.<br/>
            If this is a stand-alone User Collector install, only tarball 
            installations are supported.<br/>
        </td>
        <td>Valid values: tarball, rpm.<br/>
        </td>
        </tr>

        <tr>
            <td>hostname</td>
            <td>usercollector.domain.name</td>
            <td>hostname for User Collector.    </td>
            <td>.</td>
            </tr>

        <tr>
            <td>username</td>
            <td>collector (non-root account)</td>
            <td>UNIX user account that this services will run under. DO NOT use "root".</td>
            <td> For security purposes, this value should always be a non-root user.</td>
            </tr>

        <tr>
            <td>service_name</td>
            <td>    userpool    </td>
            <td>Used as the 'nickname' for the GSI DN in the condor_mapfile of other services.  </td>
            <td>.</td>
            </tr>

        <tr>
            <td>condor_location     </td>
            <td>/path/to/condor-userpool   </td>
            <td>Directory in which the condor software will be installed.    </td>
        <td>
           <b>IMPORTANT:</b> 
              The User Collector can share the same instance of Condor as the Frontend.
              The <b>condor_location</b> must not be a subdirectory of the Frontend's
              <b>install_location</b> or <b>logs_dir</b>.  
              They may share the same parent, however.
        </td>
            </tr>

        <tr>
            <td>collector_port  </td>
            <td>9618 (condor default)   </td>
            <td>Defines the Condor Collector port.  </td>
            <td>Optional: default is 9618 (Condor default)<br/>
              If multiple glidein services are installed on the same node, this should be unique for each service. 
        </td>
            </tr>

        <tr>
            <td>number_of_secondary_collectors  </td>
            <td align="center">5   </td>
            <td>The desired number of secondary collectors to be used.  </td>
            <td>Optional: default is 0 (zero)<br/>
                A rough estimate is to use one collector per 100 glideins 
                with a hard limit on 200 glideins per collector.
            </td>
            </tr>

        <tr>
        <td>x509_cert_dir</td>
        <td>/path/to/certificates-location </td>
        <td>The directory where the CA certificates are maintained. 
        <td>The installer will validate for the precesence of *.0 and *.r0 files.
            If the CAs are installed from the VDT distribution, this will be
            the VDT_LOCATION/globus/TRUSTED_CA directory.</td>
        </td>
        </tr>

        <tr>
        <td>x509_cert</td>
        <td>/path-to-cert-location/cert.pm</td>
        <td>The location of the certificate file being used.</td>
        <td>
           This file must be owned by the user installing (starting/stopping)
           this service.  Permissions should be 644 or 600.
        </td>
        </tr>

        <tr>
        <td>x509_key</td>
        <td> /path-to-cert-location/key.pm </td>
         <td>The location of the certificate key file being used and
             associated with the certtificate defined by the <b>x509_cert</b>
             option above.
        </td>
         <td>
           This file must be owned by the user installing (starting/stopping)
           this service.  Permissions should be 600 or 400.
        </td>
        </tr>

        <tr>
        <td>x509_gsi_dn</td>
        <td>dn-subject-of-x509_cert-using-openssl</td>
        <td>
            This is the identity of the certificate used by this service to
            contact the other Condor based glideinWMS services.
        <td>
            This is the <i>subject</i> of the certificate
            (<b>x509_cert</b> option).
            <blockquote>
            openssl x509 -subject -noout -in [<b>x509_cert</b>]<br/>
            </blockquote>
            It is used to populate the condor_config file GSI_DAEMON_NAME and condor_mapfile entries of this and the other glideinWMS services as needed.
        </td>
        </td>
        </tr>


        <tr>
        <td>condor_tarball</td>
        <td>/path/to/condor/tarballs/condor-7.5.0-linux-x86-rhel3-dynamic.tar.gz</td>
        <td>Location of the condor tarball.</td>
        <td>
         The installation script will perform the installation of condor using this tarball.
It must be a zipped tarball with a *.tg.tz name.
        </td>
        </tr>

        <tr>
        <td>condor_admin_email</td>
        <td>whomever@email.com</td>
        <td>The email address to get Condor notifications in the event of a problem.</td>
        <td>Used in the condor_config.local only.    </td>
        </tr>

        <tr>
          <td>install_vdt_client</td>
          <td align="center">y</td>
          <td>Indicates if an OSG/VDT client should be installed if it is not already present in the <b>vdt_location</b> option location.
            </td>
          <td>
Valid values:</br>
* <b>y</b> - installer will install a VDT client using the <b>vdt_location</b> and <b>pacman_location/_url</b> options specified.</br>
* <b>n</b> - will not attempt to install the VDT client<br/><br/>
This installer will not attempt to reinstall this software if it is already 
present.</br>
          </td>
        </tr>

        <tr>
            <td>vdt_location</td>
            <td>/path/to/glidein/vdt</td>
            <td>The location of the OSG/VDT client software.</td> 
            <td>
The installer looks for the existence of 2 files to verify if this is a valid 
OSG/VDT client installation:</br>
1. setup.sh</br>
2. existence of a voms-proxy-init executable.</br></br>
If the <b>install_vdt_client</b> option is 'n', then this option's value should 
be empty/blank.</br>
        </tr> 

        <tr>

            <td>glideinwms_location     </td>
            <td>/path/to/glideinWMS    </td>
            <td>Directory of the glideinWMS software.   </td>
            <td>Since this is a Condor service only, this software is only used during the installation process. </td>
            </tr>
</tbody></table>
</div>

<!-- -------------- Submit -------------------- -->
<div class="section">
<h2>Submit Section</h2>
The scheduler node software should be installed as root. While it is possible to run the schedds as a non-privileged user, it has some serious security implications; 
see the <a href="http://www.cs.wisc.edu/condor/manual/v7.0/3_6Security.html#sec:Non-Root">Security section of the Condor manual</a> for details.
<blockquote>
    ./manage-glideins --install submit --ini glideinWMS.ini
</blockquote>
See below for the ini file attributes that installing/running the submit node
requires:

<br/><br/>

    <table class="attributes">
        <tbody><tr class="head">
        <td>Attribute</td>
        <td>Example</td>
        <td>Description</td>
        <td>Comments</td>
        </tr>

        <tr>
        <td>install_type</td>
        <td>tarball or rpm</td>
        <td>
            If this is a VOFrontend RPM installation and you are doing a
            '--configure', then rpm should be specified.<br/>
            If this is a stand-alone Submit install, only tarball 
            installations are supported.<br/>
        </td>
        <td>Valid values: tarball, rpm.<br/>
        </td>
        </tr>

        <tr>
        <td>hostname</td>
        <td>submitnode.domain.name      </td>
        <td>hostname for Submit node     </td>
        <td>.</td>
        </tr>

        <tr>
        <td>username</td>
        <td>condor (non-root account)     </td>
        <td>UNIX user account that this services will run under. DO NOT use "root". </td> 
        <td> For security purposes, this value should always be a non-root user. </td>   
        </tr>

        <tr>
        <td>service_name    </td>
        <td>submit  </td>
        <td>Used as the 'nickname' for the GSI DN in the condor_mapfile of other services.   </td>
        <td>.</td>
        </tr>

        <tr>
        <td>condor_location     </td>
        <td>/path/to/condor-submit     </td>
        <td>Directory in which the condor software will be installed.    </td>
        <td>
           <b>IMPORTANT:</b> 
              The Submit can share the same instance of Condor as the Frontend.
              The <b>condor_location</b> must not be a subdirectory of the Frontend's
              <b>install_location</b> or <b>logs_dir</b>.  
              They may share the same parent, however.
        </td>
        </tr>

        <tr>
        <td>x509_cert_dir</td>
        <td>/path/to/certificates-location </td>
        <td>The directory where the CA certificates are maintained.
        <td>The installer will validate for the precesence of *.0 and *.r0 files.
            If the CAs are installed from the VDT distribution, this will be
            the VDT_LOCATION/globus/TRUSTED_CA directory.</td>
        </td>
        </tr>


        <tr>
        <td>x509_cert</td>
        <td>/path-to-cert-location/cert.pm</td>
        <td>The location of the certificate file being used.</td>
        <td>
           This file must be owned by the user installing (starting/stopping)
           this service.  Permissions should be 644 or 600.
        </td>
        </tr>

        <tr>
        <td>x509_key</td>
        <td> /path-to-cert-location/key.pm </td>
         <td>The location of the certificate key file being used and
             associated with the certtificate defined by the <b>x509_cert</b>
             option above.
        </td>
         <td>
           This file must be owned by the user installing (starting/stopping)
           this service.  Permissions should be 600 or 400.
        </td>
        </tr>

        <tr>
        <td>x509_gsi_dn</td>
        <td>dn-subject-of-x509_cert-using-openssl</td>
        <td>
            This is the identity of the certificate used by this service to
            contact the other Condor based glideinWMS services.
        <td>
            This is the <i>subject</i> of the certificate
            (<b>x509_cert</b> option).
            <blockquote>
            openssl x509 -subject -noout -in [<b>x509_cert</b>]<br/>
            </blockquote>
            It is used to populate the condor_config file GSI_DAEMON_NAME and condor_mapfile entries of this and the other glideinWMS services as needed.
        </td>
        </td>
        </tr>

        <tr>
        <td>condor_tarball</td>
        <td>/path/to/condor/tarballs/condor-7.5.0-linux-x86-rhel3-dynamic.tar.gz</td>
        <td>Location of the condor tarball.</td>
        <td>
         The installation script will perform the installation of condor using this tarball.
It must be a zipped tarball with a *.tg.tz name.
        </td>
        </tr>

        <tr>
        <td>condor_admin_email</td>
        <td>whomever@email.com</td>
        <td>The email address to get Condor notifications in the event of a problem.</td>
        <td>Used in the condor_config.local only.    </td>
        </tr>

        <tr>
        <td>number_of_schedds   </td>
        <td align="center">5   </td>
        <td>The desired number of schedds to be used.    
        <td>There must be at least 1 schedd.</td>
        </tr>

        <tr>
        <td>schedd_shared_port</td>
        <td align="center">9615</td>
        <td>
        Specifies the port number to be used by the shared port daemon
        for schedds.
        </td>
        <td>
        This is only available in Condor 7.5.3+.</br>
        This can drastically reduce the number of ports used and thus improves
        scalability.</br>
        The default port is 9615.</br>
        Leave this option blank if you do not wish to utilize this feature or
        if is is not supported in the version of Condor being used.<br/>
        For more information on use of the shared_port_daemon, see the
        <a href="condor.html#schedds">GlideinWMS - Advanced Condor Configuration manual</a>.
        </br>
        </td>
        </tr>

        <tr>
          <td>install_vdt_client</td>
          <td align="center">y</td>
          <td>Indicates if an OSG/VDT client should be installed if it is not already present in the <b>vdt_location</b> option location.
            </td>
          <td>
Valid values:</br>
* <b>y</b> - installer will install a VDT client using the <b>vdt_location</b> and <b>pacman_location/_url</b> options specified.</br>
* <b>n</b> - will not attempt to install the VDT client<br/><br/>
This installer will not attempt to reinstall this software if it is already 
present.</br>
          </td>
        </tr>

        <tr>
            <td>vdt_location</td>
            <td>    /path/to/glidein/vdt</td>
            <td>   The location of the OSG/VDT client software.</td> 
            <td>
The installer looks for the existence of 2 files to verify if this is a valid 
OSG/VDT client installation:</br>
1. setup.sh</br>
2. existence of a voms-proxy-init executable.</br></br>
If the <b>install_vdt_client</b> option is 'n', then this option's value should 
be empty/blank.</br>
        </tr> 

        <tr>
        <td>glideinwms_location     </td>
        <td>/path/to/glideinWMS    </td>
        <td>Directory of the glideinWMS software.   </td>
        <td>Since this is a Condor service only, this software is only used during the installation process. </td>
        </tr>

</tbody></table>
</div>

<!-- -------------- Frontend  -------------------- -->
<div class="section">
<h2>Glidein Frontend</h2>

The installation of the frontend should be done as the frontend user
(see username below).
<blockquote>
    ./manage-glideins --install vofrontend --ini glideinWMS.ini
</blockquote>

See below for the ini file attributes that installing/running the 
glideinWMS frontend requires:<br/><br/>

    <table class="attributes">
        <tbody><tr class="head">
        <td>Attribute</td>
        <td>Example</td>
        <td>Description</td>
        <td>Comments</td>
        </tr>

        <tr>
        <td>install_type</td>
        <td>tarball or rpm</td>
        <td>
            If this is a VOFrontend RPM installation and you are doing a
            '--configure', then rpm should be specified.<br/>
            If this is a stand-alone VOFrontend install, only tarball
            installations are supported.<br/>
        </td>
        <td>Valid values: tarball, rpm.<br/>
        </td>
        </tr>


        <tr>
        <td>hostname     </td>
        <td>vofrontend.domain.name      </td>
        <td>hostname for VOFrontend.    </td>
        <td>.  </td>
        </tr>

        <tr>
        <td>username   </td>
        <td>vofrontend (non-root account)     </td>
        <td>UNIX user account that this services will run under. DO NOT use "root". </td>
        <td> For security purposes, this value should always be a non-root user. </td>
        </tr>

        <tr>
        <td>service_name    </td>
        <td>vo_frontend    </td>
        <td>  Used as the 'nickname' for the GSI DN in the condor_mapfile.  
        </td>
        <td>   
          This name MUST correspond to frontend service name listed the factory
          configuration for the frontend to be able to talk to the factory.  
        </td>
        </tr>

        <tr>
        <td>install_location    </td>
        <td>/path/to/vofrontend   </td>
        <td>HOME directory for the frontend software.   </td>
        <td>
            When the frontend is created the following files/directories will 
            exist in this directory:<br/>
            * frontend.sh - environment script<br/>
            * frontend_[instance_name].cfg - directory containing the frontend configuration file<br/>
            * frontend_[instance_name] - directory containing the frontend files</br>
           <br/>
           The install script will create this directory if it does exist.
          </td>
        </tr>

        <tr>
        <td>logs_dir   </td>
        <td>/path/to/vofrontend/logs  </td>
        <td>User settable location for all Frontend log files.</td>
        <td>
            Beneath this location there will be multiple sets of logs:</br>
            * for the frontend as a whole</br>
            * for each group the frontend utilizes</br>
           <br/>
           The install script will create this directory if it does exist.
        </td>
        </tr>

        <tr>
        <td>instance_name   </td>
        <td>v2_5</td>
        <td>Used in naming files and directories.   </td>
        <td>.</td>
        </tr>

        <tr>
        <td>condor_location     </td>
        <td>/path/to/condor-submit     </td>
        <td>Directory in which the condor software will be installed.   </td>
        <td>
           Note: The Frontend never runs any Condor daemons. 
           It only uses the Condor client tools.<br/><br/>
           <b>IMPORTANT:</b> 
              The Frontend can share the same instance of Condor as the User Collector
              and /or Submit.
              The <b>condor_location</b> must not be a subdirectory of the Frontend's
              <b>install_location</b> or <b>logs_dir</b>.  
              They may share the same parent, however.
        </td>
        </tr>

        <tr>
        <td>condor_tarball</td>
        <td>/path/to/condor/tarballs/condor-7.5.0-linux-x86-rhel3-dynamic.tar.gz</td>
        <td>Location of the condor tarball.</td>
        <td>
         The installation script will perform the installation of condor using this tarball.
It must be a zipped tarball with a *.tg.tz name.
        </td>
        </tr>

        <tr>
        <td>condor_admin_email</td>
        <td>whomever@email.com</td>
        <td>The email address to get Condor notifications in the event of a problem.</td>
        <td>Used in the condor_config.local only.    </td>
        </tr>

        <tr>
        <td>x509_cert_dir</td>
        <td>/path/to/certificates-location </td>
        <td>The directory where the CA certificates are maintained.
        <td>The installer will validate for the precesence of *.0 and *.r0 files.
            If the CAs are installed from the VDT distribution, this will be
            the VDT_LOCATION/globus/TRUSTED_CA directory.</td>
        </td>
        </tr>

        <tr>
            <td>x509_proxy </td>
            <td>
            /path-to-proxy/x509_proxyfile
            </td>
            <td>The location of the proxy used to identify this service to the other glideinWMS services. </td>
            <td>
             This is the only glideinWMS service that currently requires a proxy
             to communicate with the other glideinWMS services. 
             This is <b>NOT</b> the glidein pilot proxy.</br>
             The <b>x509_gsi_dn</b> option that follows should be
             populated with the <i>issuer</i> of this proxy.
            </td>
        </tr>

        <tr>
        <td>x509_gsi_dn</td>
        <td>dn-issuer-of-x509_proxy-using-openssl</td>
        <td>
            This is the identity used by this service to contact the other
            Condor based glideinWMS services.
        <td>
          This is the <i>issuer</i> of the proxy identified by the 
          <b>x509_proxy</b> option above.
          <blockquote>openssl x509 -issuer -noout -in [<b>x509_proxy</b>]</blockquote>
          It is used to populate the condor_config file GSI_DAEMON_NAME and 
          condor_mapfile entries of this and the other glideinWMS services 
          as needed.
        </td>
        </td>
        </tr>

        <tr>
        <td>glidein_proxy_files     </td>
        <td>/path-to-proxy/proxyfile1</td>
        <td>Identifies the proxy(s) to be used to submit the glidein pilot jobs.
        </td>
        <td>
        If the Factory (<a href="#use_vofrontend_proxy">use_vofrontend_proxy</a>
        option) is expecting the VOFrontend to provide the glidein pilot
        proxies, at least one proxy must be specified.<br/>
        If not, then this should be empty.<br/><br/>
        When specifying multiple proxies, whitespace is the delimiter.  
        </tr>

        <tr>
        <td>glidein_proxy_dns</td>
        <td>dn-issuer-of-glidein_proxy_files-using-openssl
        </td>
        <td>Identifies the issuer(s) of each proxy specified in the 
            <b>glidein_proxy_files</b> option.
        </td>
        <td>
        This is the <i>issuer</i> of the proxy.
            (<b>x509_cert</b> option).
            <blockquote>
            openssl x509 -issuer -noout -in [<b>glidein_proxy_files</b>]<br/>
            </blockquote>
        Validation is performed based on the relative position of each 
        entry in those options.</br>
        This is used in the UserCollector condor_mapfile and condor_config.local        so the glidein pilot can communicate with the UserCollector. 
        <br/><br/>
        When mulitple proxies are specified, a semicolon is the delimiter.
        </td>
        </tr>

        <tr>
        <td>glexec_use</td>
        <td align="center">optional</td>
        <td>Tells the Factory service if use of the glexec authorization
            process is to be considered in selecting entry points to submit
            glidein pilots for the frontend user jobs.. 
        </td>
        <td>Valid values:<br/>
            * <b>required</b> - will only request glidein pilots to entry points that use glexec<br/>
            * <b>optional</b> - will request glidein pilots regardless of glexec use<br/>
            * <b>never</b> - will never request glidein pilots for entry points using glexec    <br/>
        </td>
        </tr>

        <tr>
        <td>expose_grid_env</td>
        <td align="center">True</td>
        <td>Tells the Factory service to export shell variables 
            from the glidein pilots to the user jobs or not.
        </td>
        <td>Valid values:<br/> 
            * <b>True</b> - jobs will export shell variables to the user job running.<br/>
            * <b>False</b> - no shell variables will be exported.<br/>
        </td>
        </tr>

        <tr>
        <!-- --- group matching criteria ----------------------- -->
        <td>group_name</td>
        <td align="center">main</td>
        <td>This defines a grouping for user jobs that you wish to monitor 
            using a specified critera. 
        </td>
        <td>
            The criteria used is defined by the <b>match_string</b> and <b>userjob_constraints</b> options that follow.
        </td>
        </tr>

        <tr>

        <td>userjob_constraints</td>
        <td>,</td>
        <td>This represents the criteria used for matching glideins to jobs.
        </td>
        <td> This is a Condor expression.  A simple expression would be:
        <blockquote>
          (JobUniverse==5)&&(GLIDEIN_Is_Monitor =!= TRUE)&&(JOB_Is_Monitor =!= TRUE)
        </blockquote>
        </td>
        </tr>

        <tr>

        <td>match_string</td>
        <td align="center">True</td>
        <td>This is the selection and matching criteria used for the user jobs.</td>
        <td>
            This must be in python format so using the exact case (True and False must be capitalized) is critical. One example is:<br/>
            <blockquote>
             glidein["attrs"]["GLIDEIN_Site"] in job["DESIRED_Sites"].split(",") 
            </blockquote>
         To select all jobs, just use 'True'.<br/>
         If you use other that 'True', the criteria will need to specified
         in your user's condor job statement.

        </td>
        </tr>

        <tr>
          <td>install_vdt_client</td>
          <td align="center">y</td>
          <td>Indicates if an OSG/VDT client should be installed if it is not already present in the <b>vdt_location</b> option location.
            </td>
          <td>
Valid values:</br>
* <b>y</b> - installer will install a VDT client using the <b>vdt_location</b> and <b>pacman_location/_url</b> options specified.</br>
* <b>n</b> - will not attempt to install the VDT client<br/><br/>
This installer will not attempt to reinstall this software if it is already 
present.</br>
          </td>
        </tr>

        <tr>
            <td>vdt_location</td>
            <td>    /path/to/glidein/vdt</td>
            <td>   The location of the OSG/VDT client software.</td> 
            <td>
The installer looks for the existence of 2 files to verify if this is a valid 
OSG/VDT client installation:</br>
1. setup.sh</br>
2. existence of a voms-proxy-init executable.</br></br>
If the <b>install_vdt_client</b> option is 'n', then this option's value should 
be empty/blank.</br>
        </tr> 


        <tr>
        <td>glideinwms_location</td>
        <td>/path/to/glideinWMS_code</td>
        <td>Directory of the glideinWMS software.   </td>
        <td>This software is used for both the installation and during the actual running of this glidein service.</td>
        </tr>

        <tr>
        <td>web_location    </td>
        <td>/var/www/html/factory</td>
        <td>
          Specifies the location for the monitoring and staging data that must
          be accessible by web services. The installer will create the 
          following directories in this location:<br/>
          1. <b>web_location/monitor</b><br/>
          2. <b>web_location/stage</b><br/>
        </td>
        <td><b>Important:</b>
           This should be created before installing this service as the
           service's <b>username</b> and the web server user are generally
           different.  This script will not be able to create this directory
           with proper ownership.
        </td>
        </tr>

        <tr>
        <td>web_url     </td>
        <td>http://%(hostname)s:port     </td>
        <td>Identifies the url used by the glidein pilots to download
            necessary software and to record monitoring data.<br/>
            In order to insure consistency, the installer will take the 
            unix basename of the <b>web_location</b> and append it to the 
            <b>web_url</b> value.
            So, for the value shown below in the <b>web_location</b>, the actual value
            used by the glidein pilots, will be <b>web_url/factory/stage(monitor)</b>.
          
        </td>
        <td><b>Important:</b>
            It may be a good idea to verify that the port specified is 
            accessible from off-site as some sites restrict off-site access to
            some ports.
        </td>
        </tr>

        <tr>
            <td>javascriptrrd_location</td>
            <td>/path/to/javascriptrrd</td>
            <td>Identifies the location of the javascript rrd software. </td>
            <td>This installation must include the <i>flot</i> processes in the
                parent directory.
            </td>
        </tr>

</tbody></table>
</div>

<!- ---------- Ini Examples ------------ -->
<div class="section">
<a name="ini_examples" />
<h2>Sample ini-files</h2>
<p>
Sample ini-files cover following three use cases:
  <ul>
    <li>CASE 1: Single node install with single ini files</li>
    <li>CASE 2: Multiple node install with single ini file</li>
    <li>CASE 3: Multiple node install with different init files</li>
  </ul>
</p>

<h4>CASE 1: Single node install with single ini files</h4>
<pre>
; ## Global options
[DEFAULT]
pacman_location =
pacman_url      =

install_type = tarball

hostname = cms-xen38.fnal.gov
username = glidein

version = v2_5_1
instance_name = all_four_node
install_dir = /opt/no-vdt-glideinWMS
glideinwms_location = %(install_dir)s/glideinWMS
javascriptrrd_location = %(install_dir)s/javascriptrrd

tarballs = /opt/install_packages
condor_tarball = %(tarballs)s/condor-7.5.5-x86_rhap_5-stripped.tar.gz
condor_admin_email = condor-admin@fnal.gov

vdt_location =
install_vdt_client = n

x509_cert = /etc/grid-security/hostcert.pem
x509_key  = /etc/grid-security/hostkey.pem
x509_gsi_dn = /DC=org/DC=doegrids/OU=Services/CN=cms-xen38.fnal.gov
x509_cert_dir  = /etc/grid-security/certificates

;--------------------------------------------------
[WMSCollector]

service_name = wms_service

condor_location = %(install_dir)s/condor-wms
collector_port = 9618
number_of_schedds = 5

privilege_separation = y
frontend_users = frontend_service : vo_cms,

;--------------------------------------------------
[Factory]

service_name = factory_service

install_location = %(install_dir)s/factory
logs_dir         = %(install_dir)s/factory-logs

client_log_dir   = %(install_dir)s/client-logs
client_proxy_dir = %(install_dir)s/client-proxies

use_vofrontend_proxy = y
x509_proxy  =
x509_gsi_dn =

use_glexec = n
use_ccb    = n

ress_host = osg-ress-4.fnal.gov
entry_vos = cms
entry_filters = (int(GlueCEPolicyMaxCPUTime)==0) or (int(GlueCEPolicyMaxCPUTime)<(72*60))


web_url       = http://%(hostname)s:8319
web_location  = /var/www/html/factory

;--------------------------------------------------
[UserCollector]

service_name = userpool_service

condor_location = %(install_dir)s/condor-therest
collector_port = 9640
number_of_secondary_collectors = 5

;--------------------------------------------------
[Submit]

service_name = submit_service
number_of_schedds = 5
schedd_shared_port =

condor_location = %(install_dir)s/condor-therest

;--------------------------------------------------
[VOFrontend]

service_name = frontend_service

install_location = %(install_dir)s/frontend
logs_dir         = %(install_dir)s/frontend-logs

condor_location = %(install_dir)s/condor-therest

x509_proxy = /etc/grid-security/tony_pilot_proxy
x509_gsi_dn = /DC=org/DC=doegrids/OU=People/CN=Anthony Tiradani 329103

glidein_proxy_files = /etc/grid-security/tony_pilot_proxy
glidein_proxy_dns = /DC=org/DC=doegrids/OU=People/CN=Anthony Tiradani 329103

group_name   = main
userjob_constraints = (JobUniverse==5)&&(GLIDEIN_Is_Monitor =!= TRUE)&&(JOB_Is_Monitor =!= TRUE)
match_string = glidein["attrs"]["GLIDEIN_Site"] in job["DESIRED_Sites"].split(",")

glexec_use = never
expose_grid_env = True

web_location  = /var/www/html/frontend
web_url       = http://%(hostname)s:8319
</pre>

<h4>CASE 2: Multiple node install with single ini file</h4>
<pre>
; ## Global options
[DEFAULT]

pacman_location = /opt/pacman/pacman-3.28
pacman_url      = http://physics.bu.edu/pacman/sample_cache/tarballs

install_type = tarball

version = v2.5.1
instance_name = v2.5.1-cream-cloud
install_dir = /opt/glideinWMS-v2plus
glideinwms_location = %(install_dir)s/glideinWMS
javascriptrrd_location = %(install_dir)s/javascriptrrd

tarballs = /opt/install_packages
condor_tarball = %(tarballs)s/condor-7.5.5-x86_rhap_5-stripped.tar.gz

vdt_location = /opt/vdt
install_vdt_client = n

x509_cert_dir=/opt/vdt/globus/TRUSTED_CA

condor_admin_email = condor-admin@fnal.gov

;--------------------------------------------------
[WMSCollector]

hostname = cms-xen6.fnal.gov
username    = tony_xen_factory
service_name = wms_service

condor_location = %(install_dir)s/condor-wms
collector_port = 9618

privilege_separation = y
frontend_users = frontend_service : tony_xen_cms_frontend

x509_cert = /etc/grid-security/glideincerts/cms-xen6glideinwmscollectorcert.pem
x509_key = /etc/grid-security/glideincerts/cms-xen6glideinwmscollectorkey.pem
x509_gsi_dn = /DC=org/DC=doegrids/OU=Services/CN=glideinwmscollector/cms-xen6.fnal.gov

number_of_schedds = 5

;--------------------------------------------------
[Factory]

hostname = cms-xen6.fnal.gov
username    = tony_xen_factory
service_name = factory_service

install_location = %(install_dir)s/Factory
logs_dir = %(install_dir)s/factory-logs
client_log_dir = %(install_dir)s/client-logs
client_proxy_dir = %(install_dir)s/client-proxies

use_vofrontend_proxy = y
x509_proxy =
x509_gsi_dn =
use_glexec = n
use_ccb    = y

ress_host       = osg-ress-4.fnal.gov
entry_vos = cms
entry_filters = (int(GlueCEPolicyMaxCPUTime)==0) or (int(GlueCEPolicyMaxCPUTime)<=(24*60))

web_url       = http://%(hostname)s:8319
web_location  = /var/www/html/Factory

;--------------------------------------------------
[UserCollector]

hostname = cms-xen8.fnal.gov
username    = tony_xen_pool_collector
service_name = userpool_service

condor_location = %(install_dir)s/condor-userpool
collector_port = 9618

x509_cert = /etc/grid-security/glideincerts/cms-xen8glideinpoolcollectorcert.pem
x509_key = /etc/grid-security/glideincerts/cms-xen8glideinpoolcollectorkey.pem
x509_gsi_dn = /DC=org/DC=doegrids/OU=Services/CN=glideinpoolcollector/cms-xen8.fnal.gov

number_of_secondary_collectors = 0

;--------------------------------------------------
[Submit]

hostname = cms-xen8.fnal.gov
username    = condor
service_name = submit_service

condor_location = %(install_dir)s/condor-submit

x509_cert = /etc/grid-security/glideincerts/cms-xen8glideinsubmittercmscert.pem
x509_key = /etc/grid-security/glideincerts/cms-xen8glideinsubmittercmskey.pem
x509_gsi_dn = /DC=org/DC=doegrids/OU=Services/CN=glideinsubmittercms/cms-xen8.fnal.gov

number_of_schedds = 5
schedd_shared_port = 9615

;--------------------------------------------------
[VOFrontend]

instance_name = v2_5_1-cream-cloud

hostname = cms-xen7.fnal.gov
username    = tony_xen_cms_frontend
service_name = frontend_service

install_location = %(install_dir)s/Frontend
logs_dir     = %(install_dir)s/frontend-logs

condor_location = %(install_dir)s/condor-frontend

gsi_credential_type = proxy
x509_proxy = /etc/grid-security/glideincerts/tony_pilot_proxy
x509_gsi_dn = /DC=org/DC=doegrids/OU=People/CN=Anthony Tiradani 329103

glidein_proxy_files = /etc/grid-security/glideincerts/tony_pilot_proxy
glidein_proxy_dns = /DC=org/DC=doegrids/OU=People/CN=Anthony Tiradani 329103

group_name = main
userjob_constraints = (JobUniverse==5)&&(GLIDEIN_Is_Monitor =!= TRUE)&&(JOB_Is_Monitor =!= TRUE)
match_string = glidein["attrs"]["GLIDEIN_Site"] in job["DESIRED_Sites"].split(",")

glexec_use = never
expose_grid_env = True

web_url       = http://%(hostname)s:8319
web_location  = /var/www/html/Frontend

</pre>

<h4>CASE 3: Multiple node install with different ini files</h4>

Multiple node install with services using their own ini files is a work in progress. Sample ini files for different services for a working installation is shown below.

<b>WMSCollector and Factory configuration</b>
<pre>
[DEFAULT]
install_type = tarball

installation_version = v2.5.1
install_vdt_client = n
vdt_location = /home/gfactoryuser/vdt
x509_cert_dir = %(vdt_location)s/globus/share/certificates
glideinwms_location = /home/gfactoryuser/v2.5.1/glideinWMS
pacman_location =
pacman_url      =

;--------------------------------------------------
[WMSCollector]

hostname = cmssrv97.fnal.gov
username = condoruser
service_name = WMS_Collector
condor_location = /home/condoruser/%(installation_version)s/glidecondor
collector_port = 8618
privilege_separation = y
frontend_users = Frontend-v2_5_1-cmssrv99:test1user
x509_cert = /etc/grid-security/cmssrv97condorcert.pem
x509_key = /etc/grid-security/cmssrv97condorkey.pem
condor_tarball = /home/gfactoryuser/installers/condor-7.5.5-x86_64_rhap_5-stripped.tar.gz
condor_admin_email = condor-admin@fnal.gov
x509_gsi_dn = /DC=org/DC=doegrids/OU=Services/CN=condor/cmssrv97.fnal.gov
number_of_schedds = 5

;--------------------------------------------------
[Factory]

hostname = cmssrv97.fnal.gov
username = gfactoryuser
service_name = GlideinFactory-v2.5.1-cmssrv97
install_location = /home/gfactoryuser/v2.5.1/glideinsubmit
logs_dir = /var/gfactory/v2.5.1/glideinlogs
client_log_dir = /var/gfactory/v2.5.1/clientlogs
client_proxy_dir = /var/gfactory/v2.5.1/clientproxies
instance_name = v1_0
use_vofrontend_proxy = y
use_glexec = y
use_ccb = y
ress_host = osg-ress-4.fnal.gov
entry_vos = dzero
entry_filters = (int(GlueCEPolicyMaxCPUTime)<(25*60))
web_location = /var/www/html/glidefactory-v2.5.1
web_url = http://%(hostname)s:8000
javascriptrrd_location = /home/gfactoryuser/javascriptrrd
x509_proxy =
x509_gsi_dn =

;--------------------------------------------------
[UserCollector]

hostname = cmssrv99.fnal.gov
service_name =
x509_gsi_dn =
condor_location =
collector_port =
number_of_secondary_collectors =

;--------------------------------------------------
[Submit]

hostname = cmssrv99.fnal.gov
service_name =
condor_location =
x509_gsi_dn =

;--------------------------------------------------
[VOFrontend]

hostname = cmssrv99.fnal.gov
x509_gsi_dn = /DC=org/DC=doegrids/OU=People/CN=Parag Mhashilkar 209917
glidein_proxy_files = /tmp
glidein_proxy_dns = %(x509_gsi_dn)s
</pre>

<b>User Collector ini file</b>
<pre>
[DEFAULT]

pacman_url      =
pacman_location =
install_vdt_client = n
vdt_location = /home/frontenduser/vdt
x509_cert_dir = %(vdt_location)s/globus/share/certificates
glideinwms_location = /home/frontenduser/v2.5.1/glideinWMS

;--------------------------------------------------
[WMSCollector]

hostname = cmssrv97.fnal.gov
collector_port =
username =
privilege_separation =
condor_location =
frontend_users =
service_name =
x509_gsi_dn =

;--------------------------------------------------
[Factory]

use_vofrontend_proxy =
x509_gsi_dn =
service_name =
username =

;--------------------------------------------------
[VOFrontend]

hostname = cmssrv99.fnal.gov
service_name = GlideinFactory-v2.5.1-cmssrv97
x509_gsi_dn = /DC=org/DC=doegrids/OU=People/CN=Parag Mhashilkar 209917
glidein_proxy_dns = %(x509_gsi_dn)s

;--------------------------------------------------
[UserCollector]

hostname = cmssrv99.fnal.gov
username = condoruser
service_name = User_Pool
condor_location = /home/condoruser/v2.5.1/glidecondor
collector_port = 9618
x509_cert = /etc/grid-security/cmssrv99condorcert.pem
x509_key = /etc/grid-security/cmssrv99condorkey.pem
x509_gsi_dn = /DC=org/DC=doegrids/OU=Services/CN=condor/cmssrv99.fnal.gov
condor_tarball = /home/frontenduser/installers/condor-7.5.5-x86_64_rhap_5-stripped.tar.gz
number_of_secondary_collectors = 2
condor_admin_email = condor-admin@fnal.gov

;--------------------------------------------------
[Submit]

hostname = cmssrv99.fnal.gov
service_name = UserSchedd
x509_gsi_dn = /DC=org/DC=doegrids/OU=People/CN=Parag Mhashilkar 209917
condor_location =

</pre>

<b>Submit ini file</b>
<pre>
[DEFAULT]
pacman_url      =
pacman_location =
install_vdt_client = n
vdt_location = /home/frontenduser/vdt
x509_cert_dir = %(vdt_location)s/globus/share/certificates
glideinwms_location = /home/frontenduser/v2.5.1/glideinWMS

;--------------------------------------------------
[WMSCollector]

hostname = cmssrv97.fnal.gov
username =
privilege_separation =
condor_location =
frontend_users =
service_name =
x509_gsi_dn =

;--------------------------------------------------
[Factory]

username =

;--------------------------------------------------
[VOFrontend]

hostname = cmssrv99.fnal.gov
service_name = GlideinFactory-v2.5.1-cmssrv97
x509_gsi_dn = /DC=org/DC=doegrids/OU=People/CN=Parag Mhashilkar 209917

;--------------------------------------------------
[UserCollector]

hostname = cmssrv99.fnal.gov
service_name = User_Pool
condor_location =
collector_port = 9618
x509_gsi_dn = /DC=org/DC=doegrids/OU=Services/CN=condor/cmssrv99.fnal.gov
number_of_secondary_collectors =

;--------------------------------------------------
[Submit]

hostname = cmssrv99.fnal.gov
username = testuser
service_name = UserSchedd
x509_gsi_dn = /DC=org/DC=doegrids/OU=People/CN=Parag Mhashilkar 209917
condor_location = /home/testuser/v2.5.1/glidecondor
x509_cert = /etc/grid-security/cmssrv99testusercondorcert.pem
x509_key = /etc/grid-security/cmssrv99testusercondorkey.pem
x509_gsi_dn = /DC=org/DC=doegrids/OU=Services/CN=condor/cmssrv99.fnal.gov
condor_tarball = /home/frontenduser/installers/condor-7.5.5-x86_64_rhap_5-stripped.tar.gz
condor_admin_email = condor-admin@fnal.gov
number_of_schedds = 2
schedd_shared_port = 4444

</pre>

<b>VO Frontend ini file</b>
<pre>
[DEFAULT]
pacman_version  =
pacman_url      =
pacman_location =
install_vdt_client = n
vdt_location = /home/frontenduser/vdt
x509_cert_dir = %(vdt_location)s/globus/share/certificates
glideinwms_location = /home/frontenduser/v2.5.1/glideinWMS

;--------------------------------------------------
[WMSCollector]

hostname = cmssrv97.fnal.gov
service_name = WMS_Collector
collector_port = 8618
x509_gsi_dn = /DC=org/DC=doegrids/OU=Services/CN=condor/cmssrv97.fnal.gov
username = condoruser
privilege_separation = y
frontend_users = Frontend-v2_5_1-cmssrv99:test1user
condor_location =

;--------------------------------------------------
[Factory]

hostname = cmssrv97.fnal.gov
username = gfactoryuser
use_vofrontend_proxy = y

;--------------------------------------------------
[VOFrontend]

hostname = cmssrv99.fnal.gov
username = frontenduser
service_name = Frontend-v2_5_1-cmssrv99
install_location = /home/frontenduser/v2.5.1/frontstage
logs_dir = /home/frontenduser/v2.5.1/frontlogs
instance_name = v1_0
condor_location = /home/frontenduser/v2.5.1/glidecondor
condor_tarball = /home/frontenduser/installers/condor-7.5.5-x86_64_rhap_5-stripped.tar.gz
condor_admin_email = condor-admin@fnal.gov
x509_proxy = /home/frontenduser/security/grid_proxy
x509_gsi_dn = /DC=org/DC=doegrids/OU=People/CN=Parag Mhashilkar 209917
glidein_proxy_files = %(x509_proxy)s
glidein_proxy_dns = %(x509_gsi_dn)s
glexec_use = optional
expose_grid_env = True
group_name = main
userjob_constraints = (JobUniverse==5)&&(GLIDEIN_Is_Monitor =!= TRUE)&&(JOB_Is_Monitor =!= TRUE)
match_string = glidein["attrs"]["GLIDEIN_Site"] in job["DESIRED_Sites"].split(",")
web_url = http://cmssrv99.fnal.gov:8000
web_location = /var/www/html/vofrontend-v2.5.1
javascriptrrd_location = /home/frontenduser/javascriptrrd

;--------------------------------------------------
[UserCollector]

hostname = cmssrv99.fnal.gov
service_name = User_Pool
x509_gsi_dn = /DC=org/DC=doegrids/OU=Services/CN=condor/cmssrv99.fnal.gov
collector_port = 9618
condor_location =
number_of_secondary_collectors = 2

;--------------------------------------------------
[Submit]

x509_gsi_dn = /DC=org/DC=doegrids/OU=People/CN=Parag Mhashilkar 209917
hostname = cmssrv99.fnal.gov
service_name = UserSchedd
condor_location =
</pre>

</div>


<div class="footer">
Banner image by
<a href="http://www.flickr.com/people/leafwarbler/">Madhusudan Katti</a>
used under Creative Commons license.<br>
Original Home URL: <a href="http://www.uscms.org/SoftwareComputing/Grid/WMS/glid%0AeinWMS">http://www.uscms.org/SoftwareComputing/Grid/WMS/glideinWMS</a>.
glideinWMS email support: glideinwms-support at fnal.gov
</div>
</div>
</body>
</html>
